[{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\electron\\ipc\\file-system.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fsSync' is defined but never used.","line":10,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Pulse IDE - File System IPC Handlers\r\n *\r\n * Provides secure file system access from the renderer process.\r\n * Uses chokidar for efficient file watching.\r\n */\r\n\r\nimport { IpcMain, BrowserWindow } from 'electron';\r\nimport * as fs from 'fs/promises';\r\nimport * as fsSync from 'fs';\r\nimport * as path from 'path';\r\nimport chokidar, { FSWatcher } from 'chokidar';\r\n\r\n// Active file watchers by directory\r\nconst watchers = new Map<string, FSWatcher>();\r\n\r\n/**\r\n * Set up file system IPC handlers.\r\n */\r\nexport function setupFileSystemHandlers(ipcMain: IpcMain): void {\r\n  // ========================================================================\r\n  // Read file contents\r\n  // ========================================================================\r\n  ipcMain.handle('fs:readFile', async (_event, filePath: string) => {\r\n    try {\r\n      const content = await fs.readFile(filePath, 'utf-8');\r\n      return content;\r\n    } catch (error) {\r\n      throw new Error(`Failed to read file: ${(error as Error).message}`);\r\n    }\r\n  });\r\n\r\n  // ========================================================================\r\n  // Write file contents\r\n  // ========================================================================\r\n  ipcMain.handle('fs:writeFile', async (_event, filePath: string, content: string) => {\r\n    try {\r\n      // Ensure directory exists\r\n      const dir = path.dirname(filePath);\r\n      await fs.mkdir(dir, { recursive: true });\r\n\r\n      // Write file\r\n      await fs.writeFile(filePath, content, 'utf-8');\r\n    } catch (error) {\r\n      throw new Error(`Failed to write file: ${(error as Error).message}`);\r\n    }\r\n  });\r\n\r\n  // ========================================================================\r\n  // Check if file/directory exists\r\n  // ========================================================================\r\n  ipcMain.handle('fs:exists', async (_event, filePath: string) => {\r\n    try {\r\n      await fs.access(filePath);\r\n      return true;\r\n    } catch {\r\n      return false;\r\n    }\r\n  });\r\n\r\n  // ========================================================================\r\n  // Read directory contents\r\n  // ========================================================================\r\n  ipcMain.handle('fs:readDir', async (_event, dirPath: string) => {\r\n    try {\r\n      const entries = await fs.readdir(dirPath, { withFileTypes: true });\r\n\r\n      const results = await Promise.all(\r\n        entries.map(async (entry) => {\r\n          const entryPath = path.join(dirPath, entry.name);\r\n          let stats = { size: 0, mtime: new Date() };\r\n\r\n          try {\r\n            stats = await fs.stat(entryPath);\r\n          } catch {\r\n            // Ignore stat errors for inaccessible files\r\n          }\r\n\r\n          return {\r\n            name: entry.name,\r\n            path: entryPath,\r\n            isDirectory: entry.isDirectory(),\r\n            isFile: entry.isFile(),\r\n            size: stats.size,\r\n            modified: stats.mtime.getTime(),\r\n          };\r\n        })\r\n      );\r\n\r\n      // Sort: directories first, then alphabetically\r\n      results.sort((a, b) => {\r\n        if (a.isDirectory && !b.isDirectory) return -1;\r\n        if (!a.isDirectory && b.isDirectory) return 1;\r\n        return a.name.localeCompare(b.name, undefined, { sensitivity: 'base' });\r\n      });\r\n\r\n      return results;\r\n    } catch (error) {\r\n      throw new Error(`Failed to read directory: ${(error as Error).message}`);\r\n    }\r\n  });\r\n\r\n  // ========================================================================\r\n  // Create directory\r\n  // ========================================================================\r\n  ipcMain.handle('fs:mkdir', async (_event, dirPath: string) => {\r\n    try {\r\n      await fs.mkdir(dirPath, { recursive: true });\r\n    } catch (error) {\r\n      throw new Error(`Failed to create directory: ${(error as Error).message}`);\r\n    }\r\n  });\r\n\r\n  // ========================================================================\r\n  // Remove file or directory\r\n  // ========================================================================\r\n  ipcMain.handle('fs:remove', async (_event, targetPath: string) => {\r\n    try {\r\n      const stats = await fs.stat(targetPath);\r\n      if (stats.isDirectory()) {\r\n        await fs.rm(targetPath, { recursive: true });\r\n      } else {\r\n        await fs.unlink(targetPath);\r\n      }\r\n    } catch (error) {\r\n      throw new Error(`Failed to remove: ${(error as Error).message}`);\r\n    }\r\n  });\r\n\r\n  // ========================================================================\r\n  // Rename/move file or directory\r\n  // ========================================================================\r\n  ipcMain.handle('fs:rename', async (_event, oldPath: string, newPath: string) => {\r\n    try {\r\n      await fs.rename(oldPath, newPath);\r\n    } catch (error) {\r\n      throw new Error(`Failed to rename: ${(error as Error).message}`);\r\n    }\r\n  });\r\n\r\n  // ========================================================================\r\n  // Get file stats\r\n  // ========================================================================\r\n  ipcMain.handle('fs:stat', async (_event, filePath: string) => {\r\n    try {\r\n      const stats = await fs.stat(filePath);\r\n      return {\r\n        size: stats.size,\r\n        modified: stats.mtime.getTime(),\r\n        created: stats.birthtime.getTime(),\r\n        isDirectory: stats.isDirectory(),\r\n        isFile: stats.isFile(),\r\n      };\r\n    } catch (error) {\r\n      throw new Error(`Failed to get file stats: ${(error as Error).message}`);\r\n    }\r\n  });\r\n\r\n  // ========================================================================\r\n  // Watch directory for changes\r\n  // ========================================================================\r\n  ipcMain.on('fs:watch', (event, dirPath: string) => {\r\n    // Don't create duplicate watchers\r\n    if (watchers.has(dirPath)) {\r\n      return;\r\n    }\r\n\r\n    const watcher = chokidar.watch(dirPath, {\r\n      persistent: true,\r\n      ignoreInitial: true,\r\n      depth: 10, // Limit depth for performance\r\n      ignored: [\r\n        '**/node_modules/**',\r\n        '**/.git/**',\r\n        '**/dist/**',\r\n        '**/build/**',\r\n        '**/__pycache__/**',\r\n        '**/*.pyc',\r\n      ],\r\n      awaitWriteFinish: {\r\n        stabilityThreshold: 100,\r\n        pollInterval: 50,\r\n      },\r\n    });\r\n\r\n    // Notify renderer of changes\r\n    const notify = (fsEvent: string, fsPath: string) => {\r\n      const windows = BrowserWindow.getAllWindows();\r\n      windows.forEach((win) => {\r\n        win.webContents.send('fs:change', fsEvent, fsPath);\r\n      });\r\n    };\r\n\r\n    watcher\r\n      .on('add', (filePath) => notify('add', filePath))\r\n      .on('change', (filePath) => notify('change', filePath))\r\n      .on('unlink', (filePath) => notify('unlink', filePath))\r\n      .on('addDir', (dirPath) => notify('addDir', dirPath))\r\n      .on('unlinkDir', (dirPath) => notify('unlinkDir', dirPath));\r\n\r\n    watchers.set(dirPath, watcher);\r\n  });\r\n\r\n  // ========================================================================\r\n  // Stop watching directory\r\n  // ========================================================================\r\n  ipcMain.on('fs:unwatch', (_event, dirPath: string) => {\r\n    const watcher = watchers.get(dirPath);\r\n    if (watcher) {\r\n      watcher.close();\r\n      watchers.delete(dirPath);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Clean up all file watchers.\r\n * Call this on app quit.\r\n */\r\nexport function cleanupFileWatchers(): void {\r\n  for (const [, watcher] of watchers) {\r\n    watcher.close();\r\n  }\r\n  watchers.clear();\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\electron\\ipc\\menu.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\electron\\ipc\\terminal.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\electron\\ipc\\window.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\electron\\ipc\\workspace.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\electron\\main.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\electron\\preload.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\agent\\AgentChat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\agent\\AgentInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\agent\\AgentMessage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_language' is assigned a value but never used.","line":84,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * AgentMessage - Individual Chat Message\r\n *\r\n * Displays a single message with avatar, content, and metadata.\r\n */\r\n\r\nimport type { Message } from '@/stores/agentStore';\r\n// import { FoxMascot } from '@/components/common/FoxMascot';\r\nimport { PulseLogo } from '@/components/common/PulseLogo';\r\n\r\ninterface AgentMessageProps {\r\n  message: Message;\r\n}\r\n\r\nexport function AgentMessage({ message }: AgentMessageProps) {\r\n  const isUser = message.role === 'user';\r\n  const isSystem = message.role === 'system';\r\n\r\n  return (\r\n    <div className={`flex ${isUser ? 'justify-end' : 'justify-start'}`}>\r\n      <div\r\n        className={`\r\n          max-w-[85%] rounded-lg px-3 py-2\r\n          ${isUser ? 'bg-pulse-primary text-white' : 'bg-pulse-bg-tertiary'}\r\n          ${isSystem ? 'bg-pulse-warning/20 border border-pulse-warning/50' : ''}\r\n        `}\r\n      >\r\n        {/* Avatar row */}\r\n        {!isUser && (\r\n          <div className=\"flex items-center mb-1.5\">\r\n            <div className=\"w-5 h-5 rounded-full  flex items-center justify-center mr-2\">\r\n              <PulseLogo size={40} />\r\n            </div>\r\n            <span className=\"text-xs font-medium text-pulse-fg-muted\">\r\n              {isSystem ? 'System' : 'Pulse'}\r\n            </span>\r\n            {message.isStreaming && (\r\n              <span className=\"ml-2 text-xs text-pulse-primary animate-pulse\">\r\n                typing...\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Content */}\r\n        <div className=\"text-sm whitespace-pre-wrap break-words\">\r\n          <MessageContent content={message.content} />\r\n        </div>\r\n\r\n        {/* Tool calls */}\r\n        {message.toolCalls && message.toolCalls.length > 0 && (\r\n          <div className=\"mt-2 pt-2 border-t border-pulse-border space-y-1\">\r\n            {message.toolCalls.map((tool, idx) => (\r\n              <ToolCallBadge key={idx} name={tool.name} success={tool.success} />\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Timestamp */}\r\n        <div className={`text-xs mt-1 ${isUser ? 'text-white/70' : 'text-pulse-fg-muted'}`}>\r\n          {formatTime(message.timestamp)}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Message Content\r\n// ============================================================================\r\n\r\nfunction MessageContent({ content }: { content: string }) {\r\n  // Simple markdown-like rendering\r\n  // In a real app, use a proper markdown renderer\r\n\r\n  // Code blocks\r\n  const parts = content.split(/(```[\\s\\S]*?```)/g);\r\n\r\n  return (\r\n    <>\r\n      {parts.map((part, idx) => {\r\n        if (part.startsWith('```')) {\r\n          const lines = part.slice(3, -3).split('\\n');\r\n          const _language = lines[0] || 'text';\r\n          const code = lines.slice(1).join('\\n');\r\n          return (\r\n            <pre\r\n              key={idx}\r\n              className=\"mt-2 mb-2 p-2 bg-pulse-bg rounded text-xs overflow-x-auto\"\r\n            >\r\n              <code>{code || part.slice(3, -3)}</code>\r\n            </pre>\r\n          );\r\n        }\r\n\r\n        // Inline code\r\n        const inlineParts = part.split(/(`[^`]+`)/g);\r\n        return (\r\n          <span key={idx}>\r\n            {inlineParts.map((inline, i) => {\r\n              if (inline.startsWith('`') && inline.endsWith('`')) {\r\n                return (\r\n                  <code\r\n                    key={i}\r\n                    className=\"px-1 py-0.5 bg-pulse-bg rounded text-xs font-mono\"\r\n                  >\r\n                    {inline.slice(1, -1)}\r\n                  </code>\r\n                );\r\n              }\r\n              return inline;\r\n            })}\r\n          </span>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Tool Call Badge\r\n// ============================================================================\r\n\r\nfunction ToolCallBadge({ name, success }: { name: string; success?: boolean }) {\r\n  return (\r\n    <div className=\"inline-flex items-center px-2 py-0.5 bg-pulse-bg rounded text-xs\">\r\n      <ToolIcon />\r\n      <span className=\"ml-1\">{name}</span>\r\n      {success !== undefined && (\r\n        <span className={`ml-1 ${success ? 'text-pulse-success' : 'text-pulse-error'}`}>\r\n          {success ? 'Γ£ô' : 'Γ£ù'}\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Helpers\r\n// ============================================================================\r\n\r\nfunction formatTime(timestamp: number): string {\r\n  const date = new Date(timestamp);\r\n  return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n}\r\n\r\n// ============================================================================\r\n// Icons\r\n// ============================================================================\r\nfunction ToolIcon() {\r\n  return (\r\n    <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-3 h-3 text-pulse-fg-muted\">\r\n      <path d=\"M14.5 3.5l-2-2-5 5L5 4 2 7l2.5 2.5L2 12l2 2 2.5-2.5L9 14l3-3-2.5-2.5 5-5z\" />\r\n    </svg>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\agent\\ChatHistory.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used.","line":76,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":76,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ChatHistory - Sidebar for conversation history\r\n *\r\n * Shows past agent chats and allows creating new conversations.\r\n * Uses the conversations REST API.\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useAgentStore } from '@/stores/agentStore';\r\nimport { useWorkspaceStore } from '@/stores/workspaceStore';\r\n\r\ninterface Conversation {\r\n    id: string;\r\n    title: string | null;\r\n    created_at: string;\r\n    updated_at: string;\r\n    message_count?: number;\r\n    first_message?: string | null;\r\n}\r\n\r\nconst API_BASE_URL = 'http://127.0.0.1:8765';\r\n\r\nexport function ChatHistory() {\r\n    const [conversations, setConversations] = useState<Conversation[]>([]);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const conversationId = useAgentStore((s) => s.conversationId);\r\n    const clearMessages = useAgentStore((s) => s.clearMessages);\r\n    const projectRoot = useWorkspaceStore((s) => s.projectRoot);\r\n\r\n    // Fetch conversations list\r\n    const fetchConversations = useCallback(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            if (!projectRoot) {\r\n                console.warn('No project root set, cannot fetch conversations');\r\n                setConversations([]);\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n\r\n            const encodedPath = encodeURIComponent(projectRoot);\r\n            const response = await fetch(`${API_BASE_URL}/api/conversations?limit=20&project_root=${encodedPath}`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setConversations(data);\r\n            } else {\r\n                console.error('Failed to fetch conversations:', response.status);\r\n                setConversations([]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to fetch conversations:', error);\r\n            setConversations([]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [projectRoot]);\r\n\r\n    // Load conversations when dropdown opens\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            fetchConversations();\r\n        }\r\n    }, [isOpen, fetchConversations]);\r\n\r\n    // Create new conversation\r\n    const handleNewChat = async () => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/api/conversations`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ title: null }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                clearMessages();\r\n                // The websocket will handle setting the new conversation ID\r\n                setIsOpen(false);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to create conversation:', error);\r\n        }\r\n    };\r\n\r\n    // Load existing conversation\r\n    const handleSelectConversation = async (conv: Conversation) => {\r\n        try {\r\n            if (!projectRoot) {\r\n                console.error('No project root set');\r\n                return;\r\n            }\r\n            const encodedPath = encodeURIComponent(projectRoot);\r\n            const response = await fetch(`${API_BASE_URL}/api/conversations/${conv.id}?project_root=${encodedPath}`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                clearMessages();\r\n\r\n                // Set the conversation ID so subsequent messages continue this conversation\r\n                useAgentStore.getState().setConversationId(conv.id);\r\n\r\n                // Add existing messages to store\r\n                if (data.messages && data.messages.length > 0) {\r\n                    data.messages.forEach((msg: { role: string; content: string }) => {\r\n                        useAgentStore.getState().addMessage({\r\n                            role: msg.role as 'user' | 'assistant',\r\n                            content: msg.content,\r\n                        });\r\n                    });\r\n                }\r\n\r\n                setIsOpen(false);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to load conversation:', error);\r\n        }\r\n    };\r\n\r\n    // Delete conversation\r\n    const handleDeleteConversation = async (e: React.MouseEvent, convId: string) => {\r\n        e.stopPropagation();\r\n\r\n        if (!confirm('Delete this conversation?')) return;\r\n        if (!projectRoot) {\r\n            console.error('No project root set');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const encodedPath = encodeURIComponent(projectRoot);\r\n            const response = await fetch(`${API_BASE_URL}/api/conversations/${convId}?project_root=${encodedPath}`, {\r\n                method: 'DELETE',\r\n            });\r\n\r\n            if (response.ok) {\r\n                setConversations((prev) => prev.filter((c) => c.id !== convId));\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to delete conversation:', error);\r\n        }\r\n    };\r\n\r\n    // Format relative time\r\n    const formatTime = (dateString: string) => {\r\n        const date = new Date(dateString);\r\n        const now = new Date();\r\n        const diffMs = now.getTime() - date.getTime();\r\n        const diffMins = Math.floor(diffMs / 60000);\r\n        const diffHours = Math.floor(diffMs / 3600000);\r\n        const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n        if (diffMins < 1) return 'Just now';\r\n        if (diffMins < 60) return `${diffMins}m ago`;\r\n        if (diffHours < 24) return `${diffHours}h ago`;\r\n        if (diffDays < 7) return `${diffDays}d ago`;\r\n        return date.toLocaleDateString();\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            {/* Trigger Button */}\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"p-1.5 rounded hover:bg-pulse-bg-tertiary transition-colors\"\r\n                title=\"Chat History\"\r\n            >\r\n                <HistoryIcon />\r\n            </button>\r\n\r\n            {/* Dropdown */}\r\n            {isOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <div\r\n                        className=\"fixed inset-0 z-40\"\r\n                        onClick={() => setIsOpen(false)}\r\n                    />\r\n\r\n                    {/* Panel */}\r\n                    <div className=\"absolute right-0 top-full mt-1 z-50 w-72 bg-pulse-bg-secondary border border-pulse-border rounded-lg shadow-lg overflow-hidden\">\r\n                        {/* Header */}\r\n                        <div className=\"flex items-center justify-between px-3 py-2 border-b border-pulse-border\">\r\n                            <span className=\"text-xs font-semibold text-pulse-fg-muted uppercase tracking-wide\">\r\n                                Chat History\r\n                            </span>\r\n                            <button\r\n                                onClick={handleNewChat}\r\n                                className=\"flex items-center gap-1 px-2 py-1 text-xs bg-pulse-primary text-white rounded hover:bg-pulse-primary/90 transition-colors\"\r\n                            >\r\n                                <PlusIcon />\r\n                                New Chat\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Conversations List */}\r\n                        <div className=\"max-h-80 overflow-auto\">\r\n                            {isLoading ? (\r\n                                <div className=\"p-4 text-center text-pulse-fg-muted text-xs\">\r\n                                    Loading...\r\n                                </div>\r\n                            ) : conversations.length === 0 ? (\r\n                                <div className=\"p-4 text-center text-pulse-fg-muted text-xs\">\r\n                                    No past conversations\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"p-1\">\r\n                                    {conversations.map((conv) => (\r\n                                        <button\r\n                                            key={conv.id}\r\n                                            onClick={() => handleSelectConversation(conv)}\r\n                                            className={`w-full px-3 py-2 text-left rounded hover:bg-pulse-bg-tertiary transition-colors group ${conv.id === conversationId ? 'bg-pulse-primary/10' : ''\r\n                                                }`}\r\n                                        >\r\n                                            <div className=\"flex items-start justify-between gap-2\">\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <div className=\"text-sm text-pulse-fg truncate\">\r\n                                                        {conv.first_message || conv.title || 'New Chat'}\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-2 text-xs text-pulse-fg-muted mt-0.5\">\r\n                                                        <span>{formatTime(conv.updated_at)}</span>\r\n                                                        {conv.message_count !== undefined && (\r\n                                                            <span>ΓÇó {conv.message_count} msgs</span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                                <button\r\n                                                    onClick={(e) => handleDeleteConversation(e, conv.id)}\r\n                                                    className=\"p-1 opacity-0 group-hover:opacity-100 hover:bg-red-500/20 rounded transition-all\"\r\n                                                    title=\"Delete\"\r\n                                                >\r\n                                                    <TrashIcon />\r\n                                                </button>\r\n                                            </div>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction HistoryIcon() {\r\n    return (\r\n        <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-4 h-4 text-pulse-fg-muted\">\r\n            <path d=\"M8 16A8 8 0 108 0a8 8 0 000 16zm0-14.5a6.5 6.5 0 110 13 6.5 6.5 0 010-13zM7.25 4v4.5l3.5 2.1.75-1.23-2.75-1.65V4h-1.5z\" />\r\n        </svg>\r\n    );\r\n}\r\n\r\nfunction PlusIcon() {\r\n    return (\r\n        <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-3 h-3\">\r\n            <path d=\"M8 0a.75.75 0 01.75.75v6.5h6.5a.75.75 0 010 1.5h-6.5v6.5a.75.75 0 01-1.5 0v-6.5H.75a.75.75 0 010-1.5h6.5V.75A.75.75 0 018 0z\" />\r\n        </svg>\r\n    );\r\n}\r\n\r\nfunction TrashIcon() {\r\n    return (\r\n        <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-3.5 h-3.5 text-red-400\">\r\n            <path d=\"M11 1.75V3h2.25a.75.75 0 010 1.5H2.75a.75.75 0 010-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75zm-5 0V3h4V1.75a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25zM4.496 6.675a.75.75 0 10-1.492.15l.66 6.6A1.75 1.75 0 005.405 15h5.19c.9 0 1.652-.681 1.741-1.575l.66-6.6a.75.75 0 00-1.492-.15l-.66 6.6a.25.25 0 01-.249.225h-5.19a.25.25 0 01-.249-.225l-.66-6.6z\" />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\agent\\ModeSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\agent\\ModelSelector.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'model' is defined but never used. Allowed unused args must match /^_/u.","line":141,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":141,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ModelSelector - Quick Model Change in Chat Header\r\n *\r\n * Allows changing the master agent model directly from chat window.\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { fetchSettings, updateModel } from '@/services/settingsApi';\r\n\r\n// Available models - must match SettingsTab and llm_client.py\r\nconst AVAILABLE_MODELS = [\r\n    // GPT-5 series\r\n    'gpt-5.2', 'gpt-5.1', 'gpt-5', 'gpt-5-mini', 'gpt-5-nano',\r\n    'gpt-5.2-codex', 'gpt-5.1-codex-max', 'gpt-5.1-codex',\r\n    'gpt-5.2-pro', 'gpt-5-pro',\r\n    // Claude 4.5 series\r\n    'claude-sonnet-4.5', 'claude-opus-4.5',\r\n    // Gemini 3 series\r\n    'gemini-3-pro', 'gemini-3-flash'\r\n];\r\n\r\nexport function ModelSelector() {\r\n    const [currentModel, setCurrentModel] = useState('gpt-5');\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    // Load current model on mount\r\n    useEffect(() => {\r\n        async function loadModel() {\r\n            try {\r\n                const settings = await fetchSettings();\r\n                setCurrentModel(settings.models.master_agent || 'gpt-5');\r\n            } catch (error) {\r\n                console.error('Failed to load model:', error);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        }\r\n        loadModel();\r\n    }, []);\r\n\r\n    const handleModelChange = async (model: string) => {\r\n        try {\r\n            await updateModel('master_agent', model);\r\n            setCurrentModel(model);\r\n            setIsOpen(false);\r\n        } catch (error) {\r\n            console.error('Failed to update model:', error);\r\n        }\r\n    };\r\n\r\n    // Get display name (shortened for UI)\r\n    const getDisplayName = (model: string) => {\r\n        if (model.startsWith('gpt-5')) return model.replace('gpt-', 'GPT-');\r\n        if (model.startsWith('claude')) return model.replace('claude-', 'Claude ').replace('-4.5', ' 4.5');\r\n        if (model.startsWith('gemini')) return model.replace('gemini-', 'Gemini ').replace('-', ' ');\r\n        return model;\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"px-2 py-1 text-xs text-pulse-fg-muted\">\r\n                Loading...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"flex items-center gap-1.5 px-2 py-1 text-xs rounded hover:bg-pulse-bg-tertiary transition-colors\"\r\n                title=\"Change Model\"\r\n            >\r\n                <ModelIcon />\r\n                <span className=\"text-pulse-fg-muted\">{getDisplayName(currentModel)}</span>\r\n                <ChevronIcon isOpen={isOpen} />\r\n            </button>\r\n\r\n            {isOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <div\r\n                        className=\"fixed inset-0 z-40\"\r\n                        onClick={() => setIsOpen(false)}\r\n                    />\r\n\r\n                    {/* Dropdown */}\r\n                    <div className=\"absolute right-0 top-full mt-1 z-50 min-w-48 bg-pulse-bg-secondary border border-pulse-border rounded-lg shadow-lg overflow-hidden\">\r\n                        <div className=\"p-1 max-h-64 overflow-auto\">\r\n                            {/* GPT-5 Group */}\r\n                            <div className=\"px-2 py-1 text-xs font-semibold text-pulse-fg-muted uppercase tracking-wide\">\r\n                                OpenAI\r\n                            </div>\r\n                            {AVAILABLE_MODELS.filter(m => m.startsWith('gpt')).map(model => (\r\n                                <ModelOption\r\n                                    key={model}\r\n                                    model={model}\r\n                                    displayName={getDisplayName(model)}\r\n                                    isSelected={model === currentModel}\r\n                                    onClick={() => handleModelChange(model)}\r\n                                />\r\n                            ))}\r\n\r\n                            {/* Claude Group */}\r\n                            <div className=\"px-2 py-1 mt-1 text-xs font-semibold text-pulse-fg-muted uppercase tracking-wide\">\r\n                                Anthropic\r\n                            </div>\r\n                            {AVAILABLE_MODELS.filter(m => m.startsWith('claude')).map(model => (\r\n                                <ModelOption\r\n                                    key={model}\r\n                                    model={model}\r\n                                    displayName={getDisplayName(model)}\r\n                                    isSelected={model === currentModel}\r\n                                    onClick={() => handleModelChange(model)}\r\n                                />\r\n                            ))}\r\n\r\n                            {/* Gemini Group */}\r\n                            <div className=\"px-2 py-1 mt-1 text-xs font-semibold text-pulse-fg-muted uppercase tracking-wide\">\r\n                                Google\r\n                            </div>\r\n                            {AVAILABLE_MODELS.filter(m => m.startsWith('gemini')).map(model => (\r\n                                <ModelOption\r\n                                    key={model}\r\n                                    model={model}\r\n                                    displayName={getDisplayName(model)}\r\n                                    isSelected={model === currentModel}\r\n                                    onClick={() => handleModelChange(model)}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ModelOption({\r\n    model,\r\n    displayName,\r\n    isSelected,\r\n    onClick,\r\n}: {\r\n    model: string;\r\n    displayName: string;\r\n    isSelected: boolean;\r\n    onClick: () => void;\r\n}) {\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            className={`w-full px-2 py-1.5 text-left text-xs rounded flex items-center justify-between ${isSelected\r\n                ? 'bg-pulse-primary/20 text-pulse-primary'\r\n                : 'text-pulse-fg hover:bg-pulse-bg-tertiary'\r\n                }`}\r\n        >\r\n            <span>{displayName}</span>\r\n            {isSelected && <CheckIcon />}\r\n        </button>\r\n    );\r\n}\r\n\r\nfunction ModelIcon() {\r\n    return (\r\n        <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-3.5 h-3.5 text-pulse-primary\">\r\n            <path d=\"M8 1a7 7 0 100 14A7 7 0 008 1zm0 1a6 6 0 110 12A6 6 0 018 2zm0 2a4 4 0 100 8 4 4 0 000-8zm0 1a3 3 0 110 6 3 3 0 010-6z\" />\r\n        </svg>\r\n    );\r\n}\r\n\r\nfunction ChevronIcon({ isOpen }: { isOpen: boolean }) {\r\n    return (\r\n        <svg\r\n            viewBox=\"0 0 16 16\"\r\n            fill=\"currentColor\"\r\n            className={`w-3 h-3 text-pulse-fg-muted transition-transform ${isOpen ? 'rotate-180' : ''}`}\r\n        >\r\n            <path d=\"M4 6l4 4 4-4H4z\" />\r\n        </svg>\r\n    );\r\n}\r\n\r\nfunction CheckIcon() {\r\n    return (\r\n        <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-3 h-3\">\r\n            <path d=\"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z\" />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\approval\\ApprovalOverlay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Approval' is defined but never used.","line":9,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'closeModal' is assigned a value but never used.","line":15,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ApprovalOverlay - Modal Container for Approvals\r\n *\r\n * Renders the appropriate approval modal based on approval type.\r\n */\r\n\r\nimport { useCallback, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useApprovalStore, type Approval } from '@/stores/approvalStore';\r\nimport { usePulseAgent } from '@/hooks/usePulseAgent';\r\nimport { PatchApproval } from './PatchApproval';\r\nimport { TerminalApproval } from './TerminalApproval';\r\n\r\nexport function ApprovalOverlay() {\r\n  const { isModalOpen, currentApproval, closeModal } = useApprovalStore();\r\n  const { approveAction, denyAction } = usePulseAgent({ autoConnect: false });\r\n\r\n  // Handle escape key\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && isModalOpen) {\r\n        // Don't close on escape - user must explicitly approve or deny\r\n        // Could show a hint instead\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [isModalOpen]);\r\n\r\n  const handleApprove = useCallback(\r\n    (feedback?: string) => {\r\n      if (!currentApproval) return;\r\n\r\n      // Process the approval through WebSocket\r\n      approveAction(feedback);\r\n\r\n      // Update store\r\n      useApprovalStore.getState().approveAction(currentApproval.id);\r\n    },\r\n    [currentApproval, approveAction]\r\n  );\r\n\r\n  const handleDeny = useCallback(\r\n    (feedback?: string) => {\r\n      if (!currentApproval) return;\r\n\r\n      // Process the denial through WebSocket\r\n      denyAction(feedback);\r\n\r\n      // Update store\r\n      useApprovalStore.getState().denyAction(currentApproval.id, feedback);\r\n    },\r\n    [currentApproval, denyAction]\r\n  );\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isModalOpen && currentApproval && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 z-50 flex items-center justify-center\"\r\n        >\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\r\n          />\r\n\r\n          {/* Modal Content */}\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            className=\"relative z-10 w-full max-w-2xl mx-4\"\r\n          >\r\n            {currentApproval.type === 'patch' || currentApproval.type === 'file_write' ? (\r\n              <PatchApproval\r\n                approval={currentApproval}\r\n                onApprove={handleApprove}\r\n                onDeny={handleDeny}\r\n              />\r\n            ) : (\r\n              <TerminalApproval\r\n                approval={currentApproval}\r\n                onApprove={handleApprove}\r\n                onDeny={handleDeny}\r\n              />\r\n            )}\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\approval\\PatchApproval.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PatchApprovalType' is defined but never used.","line":8,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PatchApprovalData' is defined but never used.","line":9,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PatchApproval - File Change Approval Modal\r\n *\r\n * Shows file changes and allows user to approve or deny.\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport type { Approval, PatchApproval as PatchApprovalType } from '@/stores/approvalStore';\r\nimport type { PatchApprovalData } from '@/types/websocket';\r\nimport { useEditorStore } from '@/stores/editorStore';\r\n\r\ninterface PatchApprovalProps {\r\n  approval: Approval;\r\n  onApprove: (feedback?: string) => void;\r\n  onDeny: (feedback?: string) => void;\r\n}\r\n\r\nexport function PatchApproval({ approval, onApprove, onDeny }: PatchApprovalProps) {\r\n  const [feedback, setFeedback] = useState('');\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  // Normalize data for both 'patch' and 'file_write' approval types\r\n  // 'patch' has: file_path, original_content, patched_content, patch_summary\r\n  // 'file_write' has: path, content, operation\r\n  const rawData = approval.data as Record<string, unknown>;\r\n\r\n  const data = {\r\n    file_path: (rawData.file_path as string) || (rawData.path as string) || 'unknown',\r\n    original_content: (rawData.original_content as string) || '',\r\n    patched_content: (rawData.patched_content as string) || (rawData.content as string) || '',\r\n    patch_summary: (rawData.patch_summary as string) || `${rawData.operation || 'modify'} file`,\r\n  };\r\n\r\n  const fileName = data.file_path.split(/[\\\\/]/).pop() || data.file_path;\r\n\r\n  // Check for conflict\r\n  const { hasConflict, getPatchForFile } = useEditorStore();\r\n  const patch = getPatchForFile(data.file_path);\r\n  const hasFileConflict = patch ? hasConflict(patch.id) : false;\r\n\r\n  // Calculate diff stats\r\n  const addedLines = countAddedLines(data.original_content, data.patched_content);\r\n  const removedLines = countRemovedLines(data.original_content, data.patched_content);\r\n\r\n  return (\r\n    <div className=\"bg-pulse-bg-secondary rounded-lg shadow-modal overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"px-6 py-4 border-b border-pulse-border\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-pulse-fg flex items-center\">\r\n              <FileIcon />\r\n              <span className=\"ml-2\">File Change Approval</span>\r\n            </h2>\r\n            <p className=\"text-sm text-pulse-fg-muted mt-1\">\r\n              The agent wants to modify <span className=\"font-mono text-pulse-primary\">{fileName}</span>\r\n            </p>\r\n          </div>\r\n\r\n          {/* Diff stats */}\r\n          <div className=\"flex items-center space-x-3 text-sm\">\r\n            <span className=\"text-pulse-success\">+{addedLines}</span>\r\n            <span className=\"text-pulse-error\">-{removedLines}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Conflict Warning */}\r\n      {hasFileConflict && (\r\n        <div className=\"px-6 py-3 bg-pulse-warning/20 border-b border-pulse-warning/50\">\r\n          <div className=\"flex items-center text-pulse-warning\">\r\n            <WarningIcon />\r\n            <span className=\"ml-2 text-sm font-medium\">\r\n              File has been modified since this patch was proposed\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Summary */}\r\n      <div className=\"px-6 py-4 border-b border-pulse-border\">\r\n        <h3 className=\"text-sm font-medium text-pulse-fg mb-2\">Summary</h3>\r\n        <p className=\"text-sm text-pulse-fg-muted\">{data.patch_summary || approval.description}</p>\r\n      </div>\r\n\r\n      {/* Expandable Diff Preview */}\r\n      <div className=\"px-6 py-4 border-b border-pulse-border\">\r\n        <button\r\n          onClick={() => setIsExpanded(!isExpanded)}\r\n          className=\"flex items-center text-sm text-pulse-primary hover:underline\"\r\n        >\r\n          <ChevronIcon isExpanded={isExpanded} />\r\n          <span className=\"ml-1\">{isExpanded ? 'Hide' : 'Show'} changes</span>\r\n        </button>\r\n\r\n        {isExpanded && (\r\n          <div className=\"mt-3 bg-pulse-bg rounded-lg overflow-hidden\">\r\n            <pre className=\"p-4 text-xs font-mono overflow-x-auto max-h-64 overflow-y-auto\">\r\n              <SimpleDiff\r\n                original={data.original_content}\r\n                modified={data.patched_content}\r\n              />\r\n            </pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Feedback */}\r\n      <div className=\"px-6 py-4 border-b border-pulse-border\">\r\n        <label className=\"block text-sm font-medium text-pulse-fg mb-2\">\r\n          Feedback (optional)\r\n        </label>\r\n        <textarea\r\n          value={feedback}\r\n          onChange={(e) => setFeedback(e.target.value)}\r\n          placeholder=\"Add any notes for the agent...\"\r\n          className=\"w-full px-3 py-2 bg-pulse-input border border-pulse-border rounded text-sm resize-none focus:outline-none focus:border-pulse-primary\"\r\n          rows={2}\r\n        />\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"px-6 py-4 flex items-center justify-end space-x-3\">\r\n        <button\r\n          onClick={() => onDeny(feedback)}\r\n          className=\"px-4 py-2 text-sm font-medium text-pulse-fg bg-pulse-bg-tertiary hover:bg-pulse-input rounded transition-colors\"\r\n        >\r\n          Deny\r\n        </button>\r\n        <button\r\n          onClick={() => onApprove(feedback)}\r\n          className=\"px-4 py-2 text-sm font-medium text-white bg-pulse-success hover:bg-pulse-success/90 rounded transition-colors\"\r\n        >\r\n          Approve Changes\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Simple Diff Display\r\n// ============================================================================\r\n\r\nfunction SimpleDiff({ original, modified }: { original: string; modified: string }) {\r\n  const origLines = original.split('\\n');\r\n  const modLines = modified.split('\\n');\r\n\r\n  // Very simple line-by-line comparison\r\n  const maxLines = Math.max(origLines.length, modLines.length);\r\n  const diffLines: Array<{ type: 'same' | 'added' | 'removed'; content: string }> = [];\r\n\r\n  for (let i = 0; i < maxLines; i++) {\r\n    const origLine = origLines[i];\r\n    const modLine = modLines[i];\r\n\r\n    if (origLine === modLine) {\r\n      if (origLine !== undefined) {\r\n        diffLines.push({ type: 'same', content: origLine });\r\n      }\r\n    } else {\r\n      if (origLine !== undefined) {\r\n        diffLines.push({ type: 'removed', content: origLine });\r\n      }\r\n      if (modLine !== undefined) {\r\n        diffLines.push({ type: 'added', content: modLine });\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {diffLines.map((line, idx) => (\r\n        <div\r\n          key={idx}\r\n          className={`\r\n            ${line.type === 'added' ? 'bg-pulse-success/20 text-pulse-success' : ''}\r\n            ${line.type === 'removed' ? 'bg-pulse-error/20 text-pulse-error' : ''}\r\n          `}\r\n        >\r\n          <span className=\"inline-block w-6 text-right mr-2 text-pulse-fg-muted\">\r\n            {line.type === 'added' ? '+' : line.type === 'removed' ? '-' : ' '}\r\n          </span>\r\n          {line.content}\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Helpers\r\n// ============================================================================\r\n\r\nfunction countAddedLines(original: string, modified: string): number {\r\n  const origLines = new Set(original.split('\\n'));\r\n  return modified.split('\\n').filter((line) => !origLines.has(line)).length;\r\n}\r\n\r\nfunction countRemovedLines(original: string, modified: string): number {\r\n  const modLines = new Set(modified.split('\\n'));\r\n  return original.split('\\n').filter((line) => !modLines.has(line)).length;\r\n}\r\n\r\n// ============================================================================\r\n// Icons\r\n// ============================================================================\r\n\r\nfunction FileIcon() {\r\n  return (\r\n    <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5 text-pulse-primary\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n      <path d=\"M13 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V9z\" />\r\n      <polyline points=\"13 2 13 9 20 9\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction WarningIcon() {\r\n  return (\r\n    <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\" fill=\"currentColor\">\r\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction ChevronIcon({ isExpanded }: { isExpanded: boolean }) {\r\n  return (\r\n    <svg\r\n      viewBox=\"0 0 24 24\"\r\n      className={`w-4 h-4 transition-transform ${isExpanded ? 'rotate-90' : ''}`}\r\n      fill=\"currentColor\"\r\n    >\r\n      <path d=\"M8 6l6 6-6 6\" />\r\n    </svg>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\approval\\TerminalApproval.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\common\\CommandPalette.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'executeCommand'. Either include it or remove the dependency array.","line":227,"column":5,"nodeType":"ArrayExpression","endLine":227,"endColumn":58,"suggestions":[{"desc":"Update the dependencies array to be: [filteredCommands, selectedIndex, hideCommandPalette, executeCommand]","fix":{"range":[6717,6770],"text":"[filteredCommands, selectedIndex, hideCommandPalette, executeCommand]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CommandPalette - VS Code-style Command Palette\r\n *\r\n * Provides quick access to all commands via fuzzy search.\r\n * Triggered by Ctrl+Shift+P or F1.\r\n */\r\n\r\nimport { useState, useEffect, useRef, useMemo, useCallback } from 'react';\r\nimport { useUIStore } from '@/stores/uiStore';\r\nimport { useEditorStore } from '@/stores/editorStore';\r\nimport { useWorkspaceStore } from '@/stores/workspaceStore';\r\n\r\n// ============================================================================\r\n// Command Interface\r\n// ============================================================================\r\n\r\ninterface Command {\r\n  id: string;\r\n  label: string;\r\n  shortcut?: string;\r\n  category: 'File' | 'Edit' | 'View' | 'Agent' | 'Search' | 'Terminal';\r\n  handler: () => void | Promise<void>;\r\n}\r\n\r\n// ============================================================================\r\n// Command Registry\r\n// ============================================================================\r\n\r\nfunction useCommands(): Command[] {\r\n  const { toggleSidebar, toggleAgentPanel, toggleTerminal, setTheme, theme } = useUIStore();\r\n  const { activeFilePath, saveFile, closeFile } = useEditorStore();\r\n  const { openWorkspace, refreshTree } = useWorkspaceStore();\r\n\r\n  return useMemo(() => [\r\n    // File commands\r\n    {\r\n      id: 'file.openFolder',\r\n      label: 'Open Folder',\r\n      shortcut: 'Ctrl+K',\r\n      category: 'File',\r\n      handler: async () => {\r\n        const path = await window.pulseAPI.workspace.openFolder();\r\n        if (path) openWorkspace(path);\r\n      },\r\n    },\r\n    {\r\n      id: 'file.openFile',\r\n      label: 'Open File',\r\n      shortcut: 'Ctrl+O',\r\n      category: 'File',\r\n      handler: async () => {\r\n        const path = await window.pulseAPI.workspace.openFile();\r\n        if (path) {\r\n          const content = await window.pulseAPI.fs.readFile(path);\r\n          useEditorStore.getState().openFile(path, content, { isPreview: false });\r\n        }\r\n      },\r\n    },\r\n    {\r\n      id: 'file.save',\r\n      label: 'Save',\r\n      shortcut: 'Ctrl+S',\r\n      category: 'File',\r\n      handler: () => {\r\n        if (activeFilePath) saveFile(activeFilePath);\r\n      },\r\n    },\r\n    {\r\n      id: 'file.close',\r\n      label: 'Close Editor',\r\n      shortcut: 'Ctrl+W',\r\n      category: 'File',\r\n      handler: () => {\r\n        if (activeFilePath) closeFile(activeFilePath);\r\n      },\r\n    },\r\n    {\r\n      id: 'file.refresh',\r\n      label: 'Refresh Explorer',\r\n      category: 'File',\r\n      handler: () => refreshTree(),\r\n    },\r\n\r\n    // View commands\r\n    {\r\n      id: 'view.toggleSidebar',\r\n      label: 'Toggle Sidebar',\r\n      shortcut: 'Ctrl+B',\r\n      category: 'View',\r\n      handler: toggleSidebar,\r\n    },\r\n    {\r\n      id: 'view.toggleAgentPanel',\r\n      label: 'Toggle Agent Panel',\r\n      shortcut: 'Ctrl+Shift+A',\r\n      category: 'View',\r\n      handler: toggleAgentPanel,\r\n    },\r\n    {\r\n      id: 'view.toggleTerminal',\r\n      label: 'Toggle Terminal',\r\n      shortcut: 'Ctrl+`',\r\n      category: 'View',\r\n      handler: toggleTerminal,\r\n    },\r\n    {\r\n      id: 'view.toggleTheme',\r\n      label: theme === 'dark' ? 'Switch to Light Theme' : 'Switch to Dark Theme',\r\n      category: 'View',\r\n      handler: () => setTheme(theme === 'dark' ? 'light' : 'dark'),\r\n    },\r\n\r\n    // Agent commands\r\n    {\r\n      id: 'agent.focus',\r\n      label: 'Focus Agent Input',\r\n      shortcut: 'Ctrl+J',\r\n      category: 'Agent',\r\n      handler: () => {\r\n        toggleAgentPanel();\r\n        // Focus will be handled by the agent input component\r\n      },\r\n    },\r\n\r\n    // Terminal commands\r\n    {\r\n      id: 'terminal.new',\r\n      label: 'New Terminal',\r\n      category: 'Terminal',\r\n      handler: toggleTerminal,\r\n    },\r\n  ], [toggleSidebar, toggleAgentPanel, toggleTerminal, setTheme, theme, activeFilePath, saveFile, closeFile, openWorkspace, refreshTree]);\r\n}\r\n\r\n// ============================================================================\r\n// Fuzzy Search\r\n// ============================================================================\r\n\r\nfunction fuzzyMatch(query: string, text: string): { match: boolean; score: number } {\r\n  const queryLower = query.toLowerCase();\r\n  const textLower = text.toLowerCase();\r\n\r\n  if (queryLower.length === 0) return { match: true, score: 0 };\r\n\r\n  // Check if query is a substring (highest score)\r\n  if (textLower.includes(queryLower)) {\r\n    return { match: true, score: 100 - textLower.indexOf(queryLower) };\r\n  }\r\n\r\n  // Fuzzy character matching\r\n  let queryIndex = 0;\r\n  let score = 0;\r\n\r\n  for (let i = 0; i < textLower.length && queryIndex < queryLower.length; i++) {\r\n    if (textLower[i] === queryLower[queryIndex]) {\r\n      queryIndex++;\r\n      score += 1;\r\n    }\r\n  }\r\n\r\n  return {\r\n    match: queryIndex === queryLower.length,\r\n    score: score,\r\n  };\r\n}\r\n\r\n// ============================================================================\r\n// Command Palette Component\r\n// ============================================================================\r\n\r\nexport function CommandPalette() {\r\n  const { commandPaletteVisible, hideCommandPalette } = useUIStore();\r\n  const [query, setQuery] = useState('');\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const listRef = useRef<HTMLDivElement>(null);\r\n\r\n  const commands = useCommands();\r\n\r\n  // Filter and sort commands based on query\r\n  const filteredCommands = useMemo(() => {\r\n    if (!query.trim()) return commands;\r\n\r\n    return commands\r\n      .map((cmd) => ({\r\n        cmd,\r\n        ...fuzzyMatch(query, `${cmd.category}: ${cmd.label}`),\r\n      }))\r\n      .filter((item) => item.match)\r\n      .sort((a, b) => b.score - a.score)\r\n      .map((item) => item.cmd);\r\n  }, [commands, query]);\r\n\r\n  // Reset state when palette opens\r\n  useEffect(() => {\r\n    if (commandPaletteVisible) {\r\n      setQuery('');\r\n      setSelectedIndex(0);\r\n      inputRef.current?.focus();\r\n    }\r\n  }, [commandPaletteVisible]);\r\n\r\n  // Handle keyboard navigation\r\n  const handleKeyDown = useCallback(\r\n    (e: React.KeyboardEvent) => {\r\n      switch (e.key) {\r\n        case 'ArrowDown':\r\n          e.preventDefault();\r\n          setSelectedIndex((i) => Math.min(i + 1, filteredCommands.length - 1));\r\n          break;\r\n        case 'ArrowUp':\r\n          e.preventDefault();\r\n          setSelectedIndex((i) => Math.max(i - 1, 0));\r\n          break;\r\n        case 'Enter':\r\n          e.preventDefault();\r\n          if (filteredCommands[selectedIndex]) {\r\n            executeCommand(filteredCommands[selectedIndex]);\r\n          }\r\n          break;\r\n        case 'Escape':\r\n          e.preventDefault();\r\n          hideCommandPalette();\r\n          break;\r\n      }\r\n    },\r\n    [filteredCommands, selectedIndex, hideCommandPalette]\r\n  );\r\n\r\n  // Execute command and close palette\r\n  const executeCommand = useCallback(\r\n    (command: Command) => {\r\n      hideCommandPalette();\r\n      command.handler();\r\n    },\r\n    [hideCommandPalette]\r\n  );\r\n\r\n  // Scroll selected item into view\r\n  useEffect(() => {\r\n    if (listRef.current) {\r\n      const selectedElement = listRef.current.children[selectedIndex] as HTMLElement;\r\n      if (selectedElement) {\r\n        selectedElement.scrollIntoView({ block: 'nearest' });\r\n      }\r\n    }\r\n  }, [selectedIndex]);\r\n\r\n  if (!commandPaletteVisible) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black/50\"\r\n      onClick={hideCommandPalette}\r\n    >\r\n      <div\r\n        className=\"w-[600px] max-w-[90vw] bg-pulse-bg-secondary border border-pulse-border rounded-lg shadow-xl overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Search Input */}\r\n        <div className=\"p-2 border-b border-pulse-border\">\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={query}\r\n            onChange={(e) => {\r\n              setQuery(e.target.value);\r\n              setSelectedIndex(0);\r\n            }}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"Type a command...\"\r\n            className=\"w-full px-3 py-2 bg-pulse-input border border-pulse-border rounded text-sm focus:outline-none focus:border-pulse-primary\"\r\n          />\r\n        </div>\r\n\r\n        {/* Command List */}\r\n        <div ref={listRef} className=\"max-h-80 overflow-y-auto\">\r\n          {filteredCommands.length === 0 ? (\r\n            <div className=\"px-4 py-8 text-center text-pulse-fg-muted text-sm\">\r\n              No commands found\r\n            </div>\r\n          ) : (\r\n            filteredCommands.map((command, index) => (\r\n              <CommandItem\r\n                key={command.id}\r\n                command={command}\r\n                isSelected={index === selectedIndex}\r\n                onClick={() => executeCommand(command)}\r\n                onMouseEnter={() => setSelectedIndex(index)}\r\n              />\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Command Item\r\n// ============================================================================\r\n\r\ninterface CommandItemProps {\r\n  command: Command;\r\n  isSelected: boolean;\r\n  onClick: () => void;\r\n  onMouseEnter: () => void;\r\n}\r\n\r\nfunction CommandItem({ command, isSelected, onClick, onMouseEnter }: CommandItemProps) {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      onMouseEnter={onMouseEnter}\r\n      className={`w-full px-4 py-2 flex items-center justify-between text-left transition-colors ${\r\n        isSelected ? 'bg-pulse-selection' : 'hover:bg-pulse-bg-tertiary'\r\n      }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <span className=\"text-xs text-pulse-fg-muted w-16\">{command.category}</span>\r\n        <span className=\"text-sm text-pulse-fg\">{command.label}</span>\r\n      </div>\r\n      {command.shortcut && (\r\n        <kbd className=\"px-2 py-0.5 bg-pulse-bg rounded border border-pulse-border text-xs text-pulse-fg-muted\">\r\n          {command.shortcut}\r\n        </kbd>\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default CommandPalette;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\common\\FoxMascot.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\common\\PulseLogo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\editor\\EditorContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\editor\\EditorTabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\editor\\MonacoDiffEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\editor\\MonacoEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\layout\\ActivityBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\layout\\AgentPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\layout\\AppShell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\layout\\EditorArea.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeFilePath' is assigned a value but never used.","line":15,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * EditorArea - Central Editor Region\r\n *\r\n * Contains editor tabs and the Monaco editor or diff view.\r\n */\r\n\r\nimport { EditorTabs } from '../editor/EditorTabs';\r\nimport { EditorContent } from '../editor/EditorContent';\r\nimport { useEditorStore } from '@/stores/editorStore';\r\nimport { useWorkspaceStore } from '@/stores/workspaceStore';\r\nimport { PulseLogo } from '@/components/common/PulseLogo';\r\n\r\n\r\nexport function EditorArea() {\r\n  const { tabs, activeFilePath } = useEditorStore();\r\n  const { projectRoot } = useWorkspaceStore();\r\n\r\n  // No files open - show welcome\r\n  if (tabs.length === 0) {\r\n    return <WelcomeView hasWorkspace={!!projectRoot} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      {/* Editor Tabs */}\r\n      <EditorTabs />\r\n\r\n      {/* Editor Content - min-h-0 fixes flexbox min-height: auto default */}\r\n      <div className=\"flex-1 min-h-0 overflow-hidden\">\r\n        <EditorContent />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Welcome View\r\n// ============================================================================\r\n\r\nfunction WelcomeView({ hasWorkspace }: { hasWorkspace: boolean }) {\r\n  const handleOpenFolder = async () => {\r\n    const path = await window.pulseAPI.workspace.openFolder();\r\n    if (path) {\r\n      useWorkspaceStore.getState().openWorkspace(path);\r\n    }\r\n  };\r\n\r\n  const handleOpenFile = async () => {\r\n    const path = await window.pulseAPI.workspace.openFile();\r\n    if (path) {\r\n      try {\r\n        const content = await window.pulseAPI.fs.readFile(path);\r\n        useEditorStore.getState().openFile(path, content);\r\n      } catch (error) {\r\n        console.error('Failed to open file:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  // When workspace is open, show minimal view (just logo and \"Pulse\")\r\n  if (hasWorkspace) {\r\n    return (\r\n      <div className=\"h-full flex flex-col items-center justify-center text-center p-8\">\r\n        <div className=\"w-32 h-32 mb-8 opacity-30 flex items-center justify-center\">\r\n          <PulseLogo size={280} />\r\n        </div>\r\n        <h1 className=\"text-2xl font-light text-pulse-fg\">Pulse</h1>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // When no workspace is open, show full welcome UI\r\n  return (\r\n    <div className=\"h-full flex flex-col items-center justify-center text-center p-8\">\r\n      <div className=\"w-32 h-32 mb-8 opacity-30 flex items-center justify-center\">\r\n        <PulseLogo size={280} />\r\n      </div>\r\n\r\n      {/* Title */}\r\n      <h1 className=\"text-2xl font-light text-pulse-fg mb-8\">Pulse</h1>\r\n\r\n      {/* Actions */}\r\n      <div className=\"space-y-3\">\r\n        <WelcomeAction\r\n          icon={<FolderIcon />}\r\n          label=\"Open Folder\"\r\n          shortcut=\"Ctrl+K\"\r\n          onClick={handleOpenFolder}\r\n        />\r\n        <WelcomeAction\r\n          icon={<FileIcon />}\r\n          label=\"Open File\"\r\n          shortcut=\"Ctrl+O\"\r\n          onClick={handleOpenFile}\r\n        />\r\n      </div>\r\n\r\n      {/* Recent Workspaces */}\r\n      <RecentWorkspaces />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction WelcomeAction({\r\n  icon,\r\n  label,\r\n  shortcut,\r\n  onClick,\r\n}: {\r\n  icon: React.ReactNode;\r\n  label: string;\r\n  shortcut: string;\r\n  onClick: () => void;\r\n}) {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      className=\"w-64 flex items-center px-4 py-2 bg-pulse-bg-tertiary hover:bg-pulse-input rounded transition-colors\"\r\n    >\r\n      <div className=\"w-5 h-5 mr-3 text-pulse-primary\">{icon}</div>\r\n      <span className=\"flex-1 text-left text-sm\">{label}</span>\r\n      <span className=\"text-xs text-pulse-fg-muted\">{shortcut}</span>\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction RecentWorkspaces() {\r\n  const { recentWorkspaces, openWorkspace } = useWorkspaceStore();\r\n\r\n  if (recentWorkspaces.length === 0) return null;\r\n\r\n  return (\r\n    <div className=\"mt-8\">\r\n      <h2 className=\"text-xs font-semibold uppercase tracking-wide text-pulse-fg-muted mb-3\">\r\n        Recent\r\n      </h2>\r\n      <div className=\"space-y-1\">\r\n        {recentWorkspaces.slice(0, 5).map((path) => {\r\n          const name = path.split(/[\\\\/]/).pop() || path;\r\n          return (\r\n            <button\r\n              key={path}\r\n              onClick={() => openWorkspace(path)}\r\n              className=\"w-64 text-left px-4 py-1.5 text-sm text-pulse-primary hover:underline truncate\"\r\n              title={path}\r\n            >\r\n              {name}\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Icons\r\n// ============================================================================\r\n\r\nfunction FolderIcon() {\r\n  return (\r\n    <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-full h-full\">\r\n      <path d=\"M1 4a1 1 0 011-1h4l1 1h6a1 1 0 011 1v8a1 1 0 01-1 1H2a1 1 0 01-1-1V4z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction FileIcon() {\r\n  return (\r\n    <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-full h-full\">\r\n      <path d=\"M3 1h7l3 3v11a1 1 0 01-1 1H3a1 1 0 01-1-1V2a1 1 0 011-1zm7 0v3h3\" />\r\n    </svg>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\layout\\FileExplorer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\layout\\Sidebar.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'performSearch'. Either include it or remove the dependency array.","line":82,"column":6,"nodeType":"ArrayExpression","endLine":82,"endColumn":51,"suggestions":[{"desc":"Update the dependencies array to be: [query, caseSensitive, useRegex, projectRoot, performSearch]","fix":{"range":[2559,2604],"text":"[query, caseSensitive, useRegex, projectRoot, performSearch]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Sidebar - File Explorer and Other Views\r\n *\r\n * Displays content based on active activity bar item.\r\n */\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { useUIStore } from '@/stores/uiStore';\r\nimport { useWorkspaceStore } from '@/stores/workspaceStore';\r\nimport { useEditorStore } from '@/stores/editorStore';\r\nimport { FileExplorer } from './FileExplorer';\r\n\r\nexport function Sidebar() {\r\n  const { activeActivityItem } = useUIStore();\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"h-9 px-4 flex items-center border-b border-pulse-border\">\r\n        <span className=\"text-xs font-semibold uppercase tracking-wide text-pulse-fg-muted\">\r\n          {getHeaderTitle(activeActivityItem)}\r\n        </span>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 overflow-hidden\">\r\n        {activeActivityItem === 'explorer' && <FileExplorer />}\r\n        {activeActivityItem === 'search' && <SearchPanel />}\r\n        {activeActivityItem === 'sourceControl' && <SourceControlPanel />}\r\n        {activeActivityItem === 'extensions' && <ExtensionsPanel />}\r\n        {activeActivityItem === 'settings' && <SettingsPanel />}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getHeaderTitle(item: string): string {\r\n  const titles: Record<string, string> = {\r\n    explorer: 'Explorer',\r\n    search: 'Search',\r\n    sourceControl: 'Source Control',\r\n    extensions: 'Extensions',\r\n    settings: 'Settings',\r\n  };\r\n  return titles[item] || item;\r\n}\r\n\r\n// ============================================================================\r\n// Placeholder Panels\r\n// ============================================================================\r\n\r\ninterface SearchResult {\r\n  filePath: string;\r\n  fileName: string;\r\n  lineNumber: number;\r\n  lineContent: string;\r\n  matchStart: number;\r\n  matchEnd: number;\r\n}\r\n\r\nfunction SearchPanel() {\r\n  const [query, setQuery] = useState('');\r\n  const [results, setResults] = useState<SearchResult[]>([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [caseSensitive, setCaseSensitive] = useState(false);\r\n  const [useRegex, setUseRegex] = useState(false);\r\n  const { projectRoot } = useWorkspaceStore();\r\n  const { openFile } = useEditorStore();\r\n\r\n  // Debounced search\r\n  useEffect(() => {\r\n    if (!query.trim() || !projectRoot) {\r\n      setResults([]);\r\n      return;\r\n    }\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      performSearch();\r\n    }, 300);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [query, caseSensitive, useRegex, projectRoot]);\r\n\r\n  const performSearch = useCallback(async () => {\r\n    if (!query.trim() || !projectRoot) return;\r\n\r\n    setIsSearching(true);\r\n    try {\r\n      // Use the workspace store's search or direct file search\r\n      const searchResults = await searchInFiles(projectRoot, query, { caseSensitive, useRegex });\r\n      setResults(searchResults);\r\n    } catch (error) {\r\n      console.error('Search failed:', error);\r\n      setResults([]);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  }, [query, projectRoot, caseSensitive, useRegex]);\r\n\r\n  const handleResultClick = useCallback(async (result: SearchResult) => {\r\n    try {\r\n      const content = await window.pulseAPI.fs.readFile(result.filePath);\r\n      openFile(result.filePath, content, { isPreview: false });\r\n      // TODO: Navigate to specific line in Monaco editor\r\n    } catch (error) {\r\n      console.error('Failed to open file:', error);\r\n    }\r\n  }, [openFile]);\r\n\r\n  if (!projectRoot) {\r\n    return (\r\n      <div className=\"p-4 text-center\">\r\n        <p className=\"text-xs text-pulse-fg-muted\">\r\n          Open a folder to search across files.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      {/* Search Input */}\r\n      <div className=\"p-2 space-y-2\">\r\n        <div className=\"relative\">\r\n          <input\r\n            type=\"text\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            placeholder=\"Search...\"\r\n            className=\"w-full px-3 py-1.5 pr-8 bg-pulse-input border border-pulse-border rounded text-sm focus:outline-none focus:border-pulse-primary\"\r\n          />\r\n          {isSearching && (\r\n            <div className=\"absolute right-2 top-1/2 -translate-y-1/2\">\r\n              <div className=\"w-4 h-4 border-2 border-pulse-primary border-t-transparent rounded-full animate-spin\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Search Options */}\r\n        <div className=\"flex items-center gap-3 text-xs\">\r\n          <label className=\"flex items-center gap-1 cursor-pointer text-pulse-fg-muted hover:text-pulse-fg\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={caseSensitive}\r\n              onChange={(e) => setCaseSensitive(e.target.checked)}\r\n              className=\"w-3 h-3\"\r\n            />\r\n            <span>Aa</span>\r\n          </label>\r\n          <label className=\"flex items-center gap-1 cursor-pointer text-pulse-fg-muted hover:text-pulse-fg\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={useRegex}\r\n              onChange={(e) => setUseRegex(e.target.checked)}\r\n              className=\"w-3 h-3\"\r\n            />\r\n            <span>.*</span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Results */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        {results.length === 0 && query.trim() && !isSearching && (\r\n          <div className=\"p-4 text-center text-xs text-pulse-fg-muted\">\r\n            No results found\r\n          </div>\r\n        )}\r\n\r\n        {results.length > 0 && (\r\n          <div className=\"text-xs\">\r\n            <div className=\"px-2 py-1 text-pulse-fg-muted border-b border-pulse-border\">\r\n              {results.length} result{results.length !== 1 ? 's' : ''} in {new Set(results.map(r => r.filePath)).size} file{new Set(results.map(r => r.filePath)).size !== 1 ? 's' : ''}\r\n            </div>\r\n            {results.map((result, index) => (\r\n              <button\r\n                key={`${result.filePath}:${result.lineNumber}:${index}`}\r\n                onClick={() => handleResultClick(result)}\r\n                className=\"w-full text-left px-2 py-1 hover:bg-pulse-bg-tertiary border-b border-pulse-border/50\"\r\n              >\r\n                <div className=\"flex items-center gap-1 text-pulse-fg truncate\">\r\n                  <span className=\"text-pulse-primary\">{result.fileName}</span>\r\n                  <span className=\"text-pulse-fg-muted\">:{result.lineNumber}</span>\r\n                </div>\r\n                <div className=\"text-pulse-fg-muted truncate pl-2\">\r\n                  {highlightMatch(result.lineContent, result.matchStart, result.matchEnd)}\r\n                </div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Highlight matching text\r\nfunction highlightMatch(text: string, start: number, end: number): React.ReactNode {\r\n  if (start < 0 || end <= start) return text;\r\n\r\n  const before = text.slice(0, start);\r\n  const match = text.slice(start, end);\r\n  const after = text.slice(end);\r\n\r\n  return (\r\n    <>\r\n      {before}\r\n      <span className=\"bg-pulse-primary/30 text-pulse-fg\">{match}</span>\r\n      {after}\r\n    </>\r\n  );\r\n}\r\n\r\n// Search in files recursively\r\nasync function searchInFiles(\r\n  rootPath: string,\r\n  query: string,\r\n  options: { caseSensitive: boolean; useRegex: boolean }\r\n): Promise<SearchResult[]> {\r\n  const results: SearchResult[] = [];\r\n  const maxResults = 100;\r\n\r\n  try {\r\n    // Get all files recursively\r\n    const files = await getAllFiles(rootPath);\r\n\r\n    // Search patterns\r\n    let searchPattern: RegExp;\r\n    try {\r\n      if (options.useRegex) {\r\n        searchPattern = new RegExp(query, options.caseSensitive ? 'g' : 'gi');\r\n      } else {\r\n        const escapedQuery = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n        searchPattern = new RegExp(escapedQuery, options.caseSensitive ? 'g' : 'gi');\r\n      }\r\n    } catch {\r\n      // Invalid regex, return empty\r\n      return [];\r\n    }\r\n\r\n    // Search each file\r\n    for (const filePath of files) {\r\n      if (results.length >= maxResults) break;\r\n\r\n      try {\r\n        const content = await window.pulseAPI.fs.readFile(filePath);\r\n        const lines = content.split('\\n');\r\n        const fileName = filePath.split(/[\\\\/]/).pop() || filePath;\r\n\r\n        for (let i = 0; i < lines.length && results.length < maxResults; i++) {\r\n          const line = lines[i];\r\n          searchPattern.lastIndex = 0;\r\n          const match = searchPattern.exec(line);\r\n\r\n          if (match) {\r\n            results.push({\r\n              filePath,\r\n              fileName,\r\n              lineNumber: i + 1,\r\n              lineContent: line.trim(),\r\n              matchStart: match.index - (line.length - line.trim().length),\r\n              matchEnd: match.index + match[0].length - (line.length - line.trim().length),\r\n            });\r\n          }\r\n        }\r\n      } catch {\r\n        // Skip files that can't be read (binary, etc.)\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('Search error:', error);\r\n  }\r\n\r\n  return results;\r\n}\r\n\r\n// Get all files recursively\r\nasync function getAllFiles(dirPath: string, maxDepth = 5, currentDepth = 0): Promise<string[]> {\r\n  if (currentDepth >= maxDepth) return [];\r\n\r\n  const files: string[] = [];\r\n\r\n  try {\r\n    const entries = await window.pulseAPI.fs.readDir(dirPath);\r\n\r\n    for (const entry of entries) {\r\n      // Skip hidden files and common non-text directories\r\n      if (entry.name.startsWith('.') || ['node_modules', 'dist', 'build', '__pycache__', '.git'].includes(entry.name)) {\r\n        continue;\r\n      }\r\n\r\n      if (entry.isDirectory) {\r\n        const subFiles = await getAllFiles(entry.path, maxDepth, currentDepth + 1);\r\n        files.push(...subFiles);\r\n      } else {\r\n        // Only include text files\r\n        const ext = entry.name.split('.').pop()?.toLowerCase();\r\n        const textExtensions = ['ts', 'tsx', 'js', 'jsx', 'json', 'md', 'txt', 'py', 'st', 'css', 'html', 'xml', 'yaml', 'yml', 'toml', 'ini', 'cfg', 'conf'];\r\n        if (ext && textExtensions.includes(ext)) {\r\n          files.push(entry.path);\r\n        }\r\n      }\r\n    }\r\n  } catch {\r\n    // Skip directories that can't be read\r\n  }\r\n\r\n  return files;\r\n}\r\n\r\nfunction SourceControlPanel() {\r\n  return (\r\n    <div className=\"p-4\">\r\n      <p className=\"text-xs text-pulse-fg-muted\">\r\n        Source control integration coming soon.\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ExtensionsPanel() {\r\n  return (\r\n    <div className=\"p-4\">\r\n      <p className=\"text-xs text-pulse-fg-muted\">\r\n        Extensions marketplace coming soon.\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SettingsPanel() {\r\n  return (\r\n    <div className=\"p-4\">\r\n      <p className=\"text-xs text-pulse-fg-muted\">\r\n        Settings panel coming soon.\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\layout\\StatusBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\layout\\TitleBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\settings\\SettingsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\terminal\\TerminalPanel.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'sessionsRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'sessionsRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":296,"column":19,"nodeType":"Identifier","endLine":296,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * TerminalPanel - Interactive Terminal with PTY (Multi-Session)\r\n *\r\n * VS Code-style terminal panel using xterm.js with node-pty backend.\r\n * Supports multiple terminal sessions with tabs and kill functionality.\r\n */\r\n\r\nimport { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { Terminal } from '@xterm/xterm';\r\nimport { FitAddon } from '@xterm/addon-fit';\r\nimport { WebLinksAddon } from '@xterm/addon-web-links';\r\nimport '@xterm/xterm/css/xterm.css';\r\nimport { useUIStore } from '@/stores/uiStore';\r\nimport { useWorkspaceStore } from '@/stores/workspaceStore';\r\nimport { useTheme } from '@/contexts/ThemeContext';\r\n\r\ninterface TerminalSession {\r\n  id: number;\r\n  name: string;\r\n  terminal: Terminal;\r\n  fitAddon: FitAddon;\r\n  containerEl: HTMLDivElement;\r\n  isConnected: boolean;\r\n}\r\n\r\nexport function TerminalPanel() {\r\n  const mainContainerRef = useRef<HTMLDivElement>(null);\r\n  const sessionsRef = useRef<Map<number, TerminalSession>>(new Map());\r\n  const [sessions, setSessions] = useState<{ id: number; name: string }[]>([]);\r\n  const [activeSessionId, setActiveSessionId] = useState<number | null>(null);\r\n  const sessionCounterRef = useRef(0);\r\n  const listenersRegistered = useRef(false);\r\n\r\n  // Register PTY IPC listeners ONCE at component mount\r\n  useEffect(() => {\r\n    // In React Strict Mode, effects run twice. We need to handle this properly.\r\n    // The ref prevents double-registration during the same mount cycle,\r\n    // but we must reset it in cleanup to allow registration on subsequent mounts.\r\n    if (listenersRegistered.current) return;\r\n    listenersRegistered.current = true;\r\n\r\n    console.log('[TerminalPanel] Registering PTY IPC listeners');\r\n\r\n    // Subscribe to PTY output for ALL sessions\r\n    const cleanupData = window.pulseAPI.pty.onData((ptyId: number, data: string) => {\r\n      const session = sessionsRef.current.get(ptyId);\r\n      if (session) {\r\n        session.terminal.write(data);\r\n      }\r\n    });\r\n\r\n    // Subscribe to PTY exit for ALL sessions\r\n    const cleanupExit = window.pulseAPI.pty.onExit((ptyId: number, exitCode: number) => {\r\n      const session = sessionsRef.current.get(ptyId);\r\n      if (session) {\r\n        session.terminal.writeln(`\\r\\n\\x1b[33mProcess exited with code ${exitCode}\\x1b[0m`);\r\n        session.isConnected = false;\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      console.log('[TerminalPanel] Cleaning up PTY IPC listeners');\r\n      cleanupData();\r\n      cleanupExit();\r\n      // Reset the ref so listeners can be registered again if component remounts\r\n      listenersRegistered.current = false;\r\n    };\r\n  }, []);\r\n\r\n  const { terminalHeight, setTerminalHeight, terminalVisible } = useUIStore();\r\n  const { projectRoot } = useWorkspaceStore();\r\n  const { theme } = useTheme();\r\n  const [isResizing, setIsResizing] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Get terminal theme colors\r\n  const getTerminalTheme = useCallback(() => ({\r\n    background: theme.colors.bg,\r\n    foreground: theme.colors.fg,\r\n    cursor: theme.colors.primary,\r\n    cursorAccent: theme.colors.bg,\r\n    selectionBackground: theme.colors.selection,\r\n    black: '#1e1e1e',\r\n    red: '#f48771',\r\n    green: '#89d185',\r\n    yellow: '#cca700',\r\n    blue: '#3794ff',\r\n    magenta: '#bc89bd',\r\n    cyan: '#89d9e9',\r\n    white: '#e5e5e5',\r\n    brightBlack: '#666666',\r\n    brightRed: '#f48771',\r\n    brightGreen: '#89d185',\r\n    brightYellow: '#cca700',\r\n    brightBlue: '#3794ff',\r\n    brightMagenta: '#bc89bd',\r\n    brightCyan: '#89d9e9',\r\n    brightWhite: '#ffffff',\r\n  }), [theme]);\r\n\r\n  // Create a new terminal session\r\n  const createSession = useCallback(async () => {\r\n    if (!mainContainerRef.current || !window.pulseAPI?.pty) {\r\n      setError('Terminal API not available');\r\n      return;\r\n    }\r\n\r\n    sessionCounterRef.current += 1;\r\n    const sessionNum = sessionCounterRef.current;\r\n    const sessionName = `Terminal ${sessionNum}`;\r\n\r\n    // Create container for this terminal\r\n    const containerEl = document.createElement('div');\r\n    containerEl.className = 'w-full h-full';\r\n    containerEl.style.display = 'none'; // Hidden by default\r\n\r\n    mainContainerRef.current.appendChild(containerEl);\r\n\r\n    // Create xterm.js terminal\r\n    const terminal = new Terminal({\r\n      fontFamily: '\"Cascadia Code\", Consolas, \"Courier New\", monospace',\r\n      fontSize: 13,\r\n      theme: getTerminalTheme(),\r\n      cursorBlink: true,\r\n      cursorStyle: 'bar',\r\n      scrollback: 5000,\r\n      allowTransparency: false,\r\n    });\r\n\r\n    // Load addons\r\n    const fitAddon = new FitAddon();\r\n    const webLinksAddon = new WebLinksAddon();\r\n    terminal.loadAddon(fitAddon);\r\n    terminal.loadAddon(webLinksAddon);\r\n\r\n    // Open terminal in container\r\n    terminal.open(containerEl);\r\n\r\n    // Delay fit to ensure container is sized\r\n    await new Promise(resolve => setTimeout(resolve, 50));\r\n\r\n    // Spawn PTY process\r\n    try {\r\n      const { id } = await window.pulseAPI.pty.spawn({\r\n        cwd: projectRoot || undefined,\r\n        cols: terminal.cols || 80,\r\n        rows: terminal.rows || 24,\r\n      });\r\n\r\n      // Store session\r\n      const session: TerminalSession = {\r\n        id,\r\n        name: sessionName,\r\n        terminal,\r\n        fitAddon,\r\n        containerEl,\r\n        isConnected: true,\r\n      };\r\n      sessionsRef.current.set(id, session);\r\n\r\n      // Forward terminal input to PTY\r\n      terminal.onData((data) => {\r\n        window.pulseAPI.pty.write(id, data);\r\n      });\r\n\r\n      // Handle terminal resize\r\n      terminal.onResize(({ cols, rows }) => {\r\n        window.pulseAPI.pty.resize(id, cols, rows);\r\n      });\r\n\r\n      // Subscribe to PTY output - MOVED TO GLOBAL LISTENER\r\n      // window.pulseAPI.pty.onData((ptyId: number, data: string) => { ... });\r\n\r\n      // Subscribe to PTY exit - MOVED TO GLOBAL LISTENER\r\n      // window.pulseAPI.pty.onExit((ptyId: number, exitCode: number) => { ... });\r\n\r\n      // Update state\r\n      setSessions(prev => [...prev, { id, name: sessionName }]);\r\n      setActiveSessionId(id);\r\n      setError(null);\r\n\r\n      // Show and focus this terminal\r\n      containerEl.style.display = 'block';\r\n      fitAddon.fit();\r\n      terminal.focus();\r\n\r\n    } catch (err) {\r\n      console.error('Failed to spawn PTY:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to start terminal');\r\n      containerEl.remove();\r\n    }\r\n  }, [projectRoot, getTerminalTheme]);\r\n\r\n  // Kill/close a terminal session\r\n  const killSession = useCallback(async (sessionId: number) => {\r\n    const session = sessionsRef.current.get(sessionId);\r\n    if (!session) return;\r\n\r\n    // Kill PTY\r\n    if (session.isConnected) {\r\n      try {\r\n        await window.pulseAPI.pty.kill(sessionId);\r\n      } catch (e) {\r\n        console.warn('Error killing PTY:', e);\r\n      }\r\n    }\r\n\r\n    // Dispose terminal\r\n    session.terminal.dispose();\r\n    session.containerEl.remove();\r\n    sessionsRef.current.delete(sessionId);\r\n\r\n    // Update state\r\n    setSessions(prev => prev.filter(s => s.id !== sessionId));\r\n\r\n    // If this was active, switch to another session\r\n    if (activeSessionId === sessionId) {\r\n      const remaining = [...sessionsRef.current.keys()];\r\n      setActiveSessionId(remaining.length > 0 ? remaining[0] : null);\r\n    }\r\n  }, [activeSessionId]);\r\n\r\n  // Switch to a session\r\n  const switchToSession = useCallback((sessionId: number) => {\r\n    // Hide current session\r\n    if (activeSessionId !== null) {\r\n      const currentSession = sessionsRef.current.get(activeSessionId);\r\n      if (currentSession) {\r\n        currentSession.containerEl.style.display = 'none';\r\n      }\r\n    }\r\n\r\n    // Show new session\r\n    const newSession = sessionsRef.current.get(sessionId);\r\n    if (newSession) {\r\n      newSession.containerEl.style.display = 'block';\r\n      setActiveSessionId(sessionId);\r\n      setTimeout(() => {\r\n        newSession.fitAddon.fit();\r\n        newSession.terminal.focus();\r\n      }, 10);\r\n    }\r\n  }, [activeSessionId]);\r\n\r\n  // Auto-create first session when panel becomes visible with no sessions\r\n  useEffect(() => {\r\n    if (terminalVisible && sessions.length === 0 && mainContainerRef.current) {\r\n      createSession();\r\n    }\r\n  }, [terminalVisible, sessions.length, createSession]);\r\n\r\n  // Update theme when it changes\r\n  useEffect(() => {\r\n    sessionsRef.current.forEach(session => {\r\n      session.terminal.options.theme = getTerminalTheme();\r\n    });\r\n  }, [theme, getTerminalTheme]);\r\n\r\n  // Refit on resize or visibility change\r\n  useEffect(() => {\r\n    if (terminalVisible && activeSessionId !== null) {\r\n      const session = sessionsRef.current.get(activeSessionId);\r\n      if (session) {\r\n        setTimeout(() => {\r\n          session.fitAddon.fit();\r\n          session.terminal.focus();\r\n        }, 10);\r\n      }\r\n    }\r\n  }, [terminalHeight, terminalVisible, activeSessionId]);\r\n\r\n  // Handle window resize\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      if (terminalVisible && activeSessionId !== null) {\r\n        const session = sessionsRef.current.get(activeSessionId);\r\n        if (session) {\r\n          session.fitAddon.fit();\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [terminalVisible, activeSessionId]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      sessionsRef.current.forEach(session => {\r\n        if (session.isConnected) {\r\n          window.pulseAPI.pty.kill(session.id);\r\n        }\r\n        session.terminal.dispose();\r\n      });\r\n      sessionsRef.current.clear();\r\n    };\r\n  }, []);\r\n\r\n  // Drag resize handler\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    setIsResizing(true);\r\n    const startY = e.clientY;\r\n    const startHeight = terminalHeight;\r\n\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const delta = startY - e.clientY;\r\n      setTerminalHeight(Math.max(100, Math.min(500, startHeight + delta)));\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      setIsResizing(false);\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n      // Refit after resize\r\n      if (activeSessionId !== null) {\r\n        const session = sessionsRef.current.get(activeSessionId);\r\n        if (session) {\r\n          setTimeout(() => session.fitAddon.fit(), 0);\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n  };\r\n\r\n  if (!terminalVisible) return null;\r\n\r\n  const activeSession = activeSessionId !== null ? sessionsRef.current.get(activeSessionId) : null;\r\n\r\n  return (\r\n    <div\r\n      className=\"bg-pulse-bg border-t border-pulse-border flex flex-col flex-shrink-0\"\r\n      style={{ height: terminalHeight }}\r\n    >\r\n      {/* Resize Handle */}\r\n      <div\r\n        className={`h-1 cursor-ns-resize transition-colors ${isResizing ? 'bg-pulse-primary' : 'bg-pulse-border hover:bg-pulse-primary'\r\n          }`}\r\n        onMouseDown={handleMouseDown}\r\n      />\r\n\r\n      {/* Header with Tabs */}\r\n      <div className=\"flex items-center justify-between px-2 py-1 bg-pulse-bg-secondary border-b border-pulse-border flex-shrink-0\">\r\n        {/* Left: Tabs */}\r\n        <div className=\"flex items-center space-x-1 overflow-x-auto\">\r\n          {sessions.map((session) => (\r\n            <div\r\n              key={session.id}\r\n              className={`group flex items-center px-2 py-0.5 rounded text-xs cursor-pointer transition-colors ${session.id === activeSessionId\r\n                ? 'bg-pulse-bg text-pulse-fg'\r\n                : 'text-pulse-fg-muted hover:bg-pulse-bg-tertiary hover:text-pulse-fg'\r\n                }`}\r\n              onClick={() => switchToSession(session.id)}\r\n            >\r\n              <TerminalIcon />\r\n              <span className=\"ml-1.5 truncate max-w-24\">{session.name}</span>\r\n              {/* Kill button on hover */}\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  killSession(session.id);\r\n                }}\r\n                className=\"ml-1.5 p-0.5 opacity-0 group-hover:opacity-100 hover:bg-red-500/20 rounded transition-opacity\"\r\n                title=\"Kill Terminal\"\r\n              >\r\n                <CloseIcon />\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Right: Actions */}\r\n        <div className=\"flex items-center space-x-1 ml-2\">\r\n          {/* Connection Status */}\r\n          {activeSession?.isConnected && (\r\n            <span className=\"w-2 h-2 rounded-full bg-pulse-success mr-2\" title=\"Connected\" />\r\n          )}\r\n          {error && (\r\n            <span className=\"text-xs text-pulse-warning mr-2\" title={error}>\r\n              (Error)\r\n            </span>\r\n          )}\r\n\r\n          {/* New Terminal Button */}\r\n          <button\r\n            onClick={createSession}\r\n            className=\"text-pulse-fg-muted hover:text-pulse-fg p-1 rounded hover:bg-pulse-bg-tertiary\"\r\n            title=\"New Terminal\"\r\n          >\r\n            <PlusIcon />\r\n          </button>\r\n          {/* Minimize Button */}\r\n          <button\r\n            onClick={() => setTerminalHeight(100)}\r\n            className=\"text-pulse-fg-muted hover:text-pulse-fg p-1 rounded hover:bg-pulse-bg-tertiary\"\r\n            title=\"Minimize Terminal\"\r\n          >\r\n            <MinimizeIcon />\r\n          </button>\r\n          {/* Close Panel Button */}\r\n          <button\r\n            onClick={() => useUIStore.getState().toggleTerminal()}\r\n            className=\"text-pulse-fg-muted hover:text-pulse-fg p-1 rounded hover:bg-pulse-bg-tertiary\"\r\n            title=\"Close Terminal (Ctrl+`)\"\r\n          >\r\n            <CloseIcon />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Terminal Content */}\r\n      <div\r\n        ref={mainContainerRef}\r\n        className=\"flex-1 overflow-hidden p-1\"\r\n        onClick={() => activeSession?.terminal.focus()}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Icons\r\n// ============================================================================\r\n\r\nfunction TerminalIcon() {\r\n  return (\r\n    <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-3.5 h-3.5 flex-shrink-0\">\r\n      <path d=\"M2 3a1 1 0 011-1h10a1 1 0 011 1v10a1 1 0 01-1 1H3a1 1 0 01-1-1V3zm1 0v10h10V3H3z\" />\r\n      <path d=\"M4 6l3 2-3 2V6zm4 4h4v1H8v-1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction PlusIcon() {\r\n  return (\r\n    <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-3.5 h-3.5\">\r\n      <path d=\"M8 2v12M2 8h12\" stroke=\"currentColor\" strokeWidth=\"2\" fill=\"none\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction MinimizeIcon() {\r\n  return (\r\n    <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" className=\"w-3.5 h-3.5\">\r\n      <path d=\"M2 8h12v1H2z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction CloseIcon() {\r\n  return (\r\n    <svg viewBox=\"0 0 16 16\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"w-3 h-3\">\r\n      <path d=\"M4 4l8 8M12 4l-8 8\" />\r\n    </svg>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\vibe\\VibeLoader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\components\\vibe\\VibePulse.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\contexts\\ThemeContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":66,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":66,"endColumn":46},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":293,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":293,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Theme Context - Centralized Theme Management\n *\n * Provides 5 distinct professional themes for Pulse IDE:\n * 1. Midnight Pulse (Default) - Deep charcoal with Pulse Orange accents\n * 2. Solar Flare - Clean paper-white/gray with orange primary\n * 3. Nebula - Deep violet/black with neon cyan/magenta\n * 4. Emerald Flow - Dark slate green with seafoam accents\n * 5. Crimson Horizon - Warm dark browns with sunset gradients\n */\n\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\n\n// ============================================================================\n// Theme Definitions\n// ============================================================================\n\nexport type ThemeName = 'midnight-pulse' | 'solar-flare' | 'nebula' | 'emerald-flow' | 'crimson-horizon';\n\nexport interface ThemeColors {\n  // Core backgrounds\n  bg: string;\n  bgSecondary: string;\n  bgTertiary: string;\n\n  // Foregrounds\n  fg: string;\n  fgMuted: string;\n\n  // Borders\n  border: string;\n  borderActive: string;\n\n  // Inputs\n  input: string;\n  inputFocus: string;\n\n  // Primary accent\n  primary: string;\n  primaryHover: string;\n\n  // Status colors\n  success: string;\n  warning: string;\n  error: string;\n  info: string;\n\n  // Selection\n  selection: string;\n\n  // Vibe colors\n  vibeThinking: string;\n  vibeContext: string;\n  vibeAction: string;\n}\n\nexport interface Theme {\n  name: ThemeName;\n  label: string;\n  icon: 'moon' | 'sun' | 'stars' | 'leaf' | 'sunset';\n  isDark: boolean;\n  colors: ThemeColors;\n}\n\n// Theme definitions\nexport const themes: Record<ThemeName, Theme> = {\n  'midnight-pulse': {\n    name: 'midnight-pulse',\n    label: 'Midnight Pulse',\n    icon: 'moon',\n    isDark: true,\n    colors: {\n      bg: '#1F1F1F',\n      bgSecondary: '#252526',\n      bgTertiary: '#2D2D2D',\n      fg: '#CCCCCC',\n      fgMuted: '#808080',\n      border: '#2B2B2B',\n      borderActive: '#FF521B',\n      input: '#313131',\n      inputFocus: '#3C3C3C',\n      primary: '#FF521B',\n      primaryHover: '#FF7043',\n      success: '#89D185',\n      warning: '#CCA700',\n      error: '#F48771',\n      info: '#3794FF',\n      selection: '#3A2618',\n      vibeThinking: '#3794FF',\n      vibeContext: '#CCA700',\n      vibeAction: '#89D185',\n    },\n  },\n  'solar-flare': {\n    name: 'solar-flare',\n    label: 'Solar Flare',\n    icon: 'sun',\n    isDark: false,\n    colors: {\n      bg: '#FFFFFF',\n      bgSecondary: '#F5F5F5',\n      bgTertiary: '#EBEBEB',\n      fg: '#1A1A1A',\n      fgMuted: '#6B6B6B',\n      border: '#E0E0E0',\n      borderActive: '#FF521B',\n      input: '#FFFFFF',\n      inputFocus: '#F0F0F0',\n      primary: '#FF521B',\n      primaryHover: '#E64A19',\n      success: '#2E7D32',\n      warning: '#F57C00',\n      error: '#C62828',\n      info: '#1565C0',\n      selection: '#FFE0B2',\n      vibeThinking: '#1565C0',\n      vibeContext: '#F57C00',\n      vibeAction: '#2E7D32',\n    },\n  },\n  'nebula': {\n    name: 'nebula',\n    label: 'Nebula',\n    icon: 'stars',\n    isDark: true,\n    colors: {\n      bg: '#1A103C',\n      bgSecondary: '#221548',\n      bgTertiary: '#2B1D55',\n      fg: '#E0E0FF',\n      fgMuted: '#9090C0',\n      border: '#3D2D6B',\n      borderActive: '#00FFFF',\n      input: '#2B1D55',\n      inputFocus: '#352665',\n      primary: '#00FFFF',\n      primaryHover: '#40FFFF',\n      success: '#00FF88',\n      warning: '#FFAA00',\n      error: '#FF5577',\n      info: '#8080FF',\n      selection: '#4A3D7A',\n      vibeThinking: '#8080FF',\n      vibeContext: '#FF00FF',\n      vibeAction: '#00FF88',\n    },\n  },\n  'emerald-flow': {\n    name: 'emerald-flow',\n    label: 'Emerald Flow',\n    icon: 'leaf',\n    isDark: true,\n    colors: {\n      bg: '#1A2421',\n      bgSecondary: '#202D29',\n      bgTertiary: '#273632',\n      fg: '#D0E8E0',\n      fgMuted: '#7A9990',\n      border: '#2E3D38',\n      borderActive: '#4ECDC4',\n      input: '#273632',\n      inputFocus: '#2E403A',\n      primary: '#4ECDC4',\n      primaryHover: '#6EDDD5',\n      success: '#95E1A3',\n      warning: '#F4D03F',\n      error: '#E74C3C',\n      info: '#5DADE2',\n      selection: '#2A4540',\n      vibeThinking: '#5DADE2',\n      vibeContext: '#F4D03F',\n      vibeAction: '#4ECDC4',\n    },\n  },\n  'crimson-horizon': {\n    name: 'crimson-horizon',\n    label: 'Crimson Horizon',\n    icon: 'sunset',\n    isDark: true,\n    colors: {\n      bg: '#1F1612',\n      bgSecondary: '#2A1F19',\n      bgTertiary: '#352820',\n      fg: '#F0E6DC',\n      fgMuted: '#A08878',\n      border: '#3D2E24',\n      borderActive: '#FF6B35',\n      input: '#352820',\n      inputFocus: '#403028',\n      primary: '#FF6B35',\n      primaryHover: '#FF8855',\n      success: '#A8D08D',\n      warning: '#F5B041',\n      error: '#E74C3C',\n      info: '#85C1E9',\n      selection: '#4A3528',\n      vibeThinking: '#85C1E9',\n      vibeContext: '#F5B041',\n      vibeAction: '#A8D08D',\n    },\n  },\n};\n\n// ============================================================================\n// Context\n// ============================================================================\n\ninterface ThemeContextValue {\n  theme: Theme;\n  themeName: ThemeName;\n  setTheme: (name: ThemeName) => void;\n  cycleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextValue | null>(null);\n\n// ============================================================================\n// Provider\n// ============================================================================\n\nconst THEME_STORAGE_KEY = 'pulse-theme';\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [themeName, setThemeName] = useState<ThemeName>(() => {\n    // Load from localStorage\n    if (typeof window !== 'undefined') {\n      const saved = localStorage.getItem(THEME_STORAGE_KEY);\n      if (saved && saved in themes) {\n        return saved as ThemeName;\n      }\n    }\n    return 'midnight-pulse';\n  });\n\n  const theme = themes[themeName];\n\n  // Apply theme CSS variables\n  useEffect(() => {\n    const root = document.documentElement;\n    const { colors } = theme;\n\n    // Set CSS custom properties\n    root.style.setProperty('--pulse-bg', colors.bg);\n    root.style.setProperty('--pulse-bg-secondary', colors.bgSecondary);\n    root.style.setProperty('--pulse-bg-tertiary', colors.bgTertiary);\n    root.style.setProperty('--pulse-fg', colors.fg);\n    root.style.setProperty('--pulse-fg-muted', colors.fgMuted);\n    root.style.setProperty('--pulse-border', colors.border);\n    root.style.setProperty('--pulse-border-active', colors.borderActive);\n    root.style.setProperty('--pulse-input', colors.input);\n    root.style.setProperty('--pulse-input-focus', colors.inputFocus);\n    root.style.setProperty('--pulse-primary', colors.primary);\n    root.style.setProperty('--pulse-primary-hover', colors.primaryHover);\n    root.style.setProperty('--pulse-success', colors.success);\n    root.style.setProperty('--pulse-warning', colors.warning);\n    root.style.setProperty('--pulse-error', colors.error);\n    root.style.setProperty('--pulse-info', colors.info);\n    root.style.setProperty('--pulse-selection', colors.selection);\n    root.style.setProperty('--pulse-vibe-thinking', colors.vibeThinking);\n    root.style.setProperty('--pulse-vibe-context', colors.vibeContext);\n    root.style.setProperty('--pulse-vibe-action', colors.vibeAction);\n\n    // Set data attribute for conditional styling\n    root.setAttribute('data-theme', themeName);\n    root.setAttribute('data-theme-mode', theme.isDark ? 'dark' : 'light');\n\n    // Save to localStorage\n    localStorage.setItem(THEME_STORAGE_KEY, themeName);\n  }, [theme, themeName]);\n\n  const setTheme = useCallback((name: ThemeName) => {\n    setThemeName(name);\n  }, []);\n\n  const cycleTheme = useCallback(() => {\n    const themeNames = Object.keys(themes) as ThemeName[];\n    const currentIndex = themeNames.indexOf(themeName);\n    const nextIndex = (currentIndex + 1) % themeNames.length;\n    setThemeName(themeNames[nextIndex]);\n  }, [themeName]);\n\n  return (\n    <ThemeContext.Provider value={{ theme, themeName, setTheme, cycleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\n// ============================================================================\n// Hook\n// ============================================================================\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}\n\n// ============================================================================\n// Theme Icons\n// ============================================================================\n\nexport function ThemeIcon({ icon, className = '', style }: { icon: Theme['icon']; className?: string; style?: React.CSSProperties }) {\n  switch (icon) {\n    case 'moon':\n      return (\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className} style={style}>\n          <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path>\n        </svg>\n      );\n    case 'sun':\n      return (\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className} style={style}>\n          <circle fill=\"currentColor\" cx=\"12\" cy=\"12\" r=\"4\"></circle>\n          <path d=\"M12 2v2m0 16v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M2 12h2m16 0h2M4.22 19.78l1.42-1.42m12.72-12.72l1.42-1.42\"></path>\n        </svg>\n      );\n    case 'stars':\n      return (\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className} style={style}>\n          <path d=\"M12 2l2 6h6l-5 4 2 6-5-4-5 4 2-6-5-4h6z\"></path>\n          <circle cx=\"19\" cy=\"5\" r=\"2\"></circle>\n          <circle cx=\"5\" cy=\"19\" r=\"2\"></circle>\n        </svg>\n      );\n    case 'leaf':\n      return (\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className={className} style={style}>\n          <path d=\"M17 8C8 10 5.9 16.17 3.82 21.34l1.89.66.95-2.3c.48.17.98.3 1.34.3C19 20 22 3 22 3c-1 2-8 2.25-13 3.25S2 11.5 2 13.5s1.75 3.75 1.75 3.75C7 8 17 8 17 8z\" />\n        </svg>\n      );\n    case 'sunset':\n      return (\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className} style={style}>\n          <circle cx=\"12\" cy=\"10\" r=\"3\"></circle>\n          <path d=\"M18 16c1.66 0 3-1.34 3-3s-1.34-3-3-3c-.17 0-.33.02-.5.05C16.95 8.19 15.11 7 13 7c-2.76 0-5 2.24-5 5 0 .34.04.67.09 1H6c-1.66 0-3 1.34-3 3s1.34 3 3 3h12z\"></path>\n        </svg>\n      );\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\hooks\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\hooks\\useFileSystem.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\hooks\\useKeyboardShortcuts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\hooks\\useMenuActions.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'handleNewFile' and 'handleSave'. Either include them or remove the dependency array.","line":74,"column":6,"nodeType":"ArrayExpression","endLine":74,"endColumn":80,"suggestions":[{"desc":"Update the dependencies array to be: [openFile, openWorkspace, toggleSidebar, toggleAgentPanel, toggleTerminal, handleNewFile, handleSave]","fix":{"range":[2262,2336],"text":"[openFile, openWorkspace, toggleSidebar, toggleAgentPanel, toggleTerminal, handleNewFile, handleSave]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * useMenuActions Hook\n *\n * Handles menu actions from the Electron main process.\n * Routes actions to appropriate handlers in the React app.\n */\n\nimport { useEffect } from 'react';\nimport { useEditorStore } from '@/stores/editorStore';\nimport { useWorkspaceStore } from '@/stores/workspaceStore';\nimport { useUIStore } from '@/stores/uiStore';\n\nexport function useMenuActions(): void {\n  const { openFile, saveFile, activeFilePath } = useEditorStore();\n  const { openWorkspace } = useWorkspaceStore();\n  const { toggleSidebar, toggleAgentPanel, toggleTerminal } = useUIStore();\n\n  useEffect(() => {\n    // Handle menu actions from main process\n    const unsubscribeAction = window.pulseAPI.menu.onAction((action) => {\n      console.log('[Menu] Action received:', action);\n\n      switch (action) {\n        case 'new-file':\n          handleNewFile();\n          break;\n        case 'save':\n          handleSave();\n          break;\n        case 'toggle-sidebar':\n          toggleSidebar();\n          break;\n        case 'toggle-agent-panel':\n          toggleAgentPanel();\n          break;\n        case 'toggle-terminal':\n          toggleTerminal();\n          break;\n        case 'settings':\n          // Open settings as an editor tab (not activity bar item)\n          openFile('__settings__', '');\n          break;\n        case 'find':\n          // Trigger find dialog in Monaco editor\n          // TODO: Send command to Monaco\n          break;\n        default:\n          console.log('[Menu] Unhandled action:', action);\n      }\n    });\n\n    // Handle file opened from menu\n    const unsubscribeFile = window.pulseAPI.menu.onFileOpened(async (filePath) => {\n      console.log('[Menu] File opened:', filePath);\n      try {\n        const content = await window.pulseAPI.fs.readFile(filePath);\n        openFile(filePath, content);\n      } catch (error) {\n        console.error('[Menu] Failed to open file:', error);\n      }\n    });\n\n    // Handle folder opened from menu\n    const unsubscribeFolder = window.pulseAPI.menu.onFolderOpened((folderPath) => {\n      console.log('[Menu] Folder opened:', folderPath);\n      openWorkspace(folderPath);\n    });\n\n    return () => {\n      unsubscribeAction();\n      unsubscribeFile();\n      unsubscribeFolder();\n    };\n  }, [openFile, openWorkspace, toggleSidebar, toggleAgentPanel, toggleTerminal]);\n\n  // Helper functions\n  function handleNewFile(): void {\n    // Create a new untitled file\n    const untitledPath = `untitled-${Date.now()}`;\n    openFile(untitledPath, '');\n  }\n\n  function handleSave(): void {\n    if (activeFilePath) {\n      saveFile(activeFilePath);\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\hooks\\usePulseAgent.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'handleApprovalRequired', 'handleError', 'handleEvent', and 'handleRunResult'. Either include them or remove the dependency array.","line":120,"column":5,"nodeType":"ArrayExpression","endLine":120,"endColumn":7,"suggestions":[{"desc":"Update the dependencies array to be: [handleApprovalRequired, handleError, handleEvent, handleRunResult]","fix":{"range":[3648,3650],"text":"[handleApprovalRequired, handleError, handleEvent, handleRunResult]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\services\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\services\\monaco-config.ts","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":183,"column":16,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":183,"endColumn":17,"suggestions":[{"messageId":"removeEscape","fix":{"range":[5207,5208],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[5207,5207],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Monaco Editor Configuration\r\n *\r\n * Theme definition and language configurations for Monaco editor.\r\n */\r\n\r\nimport type { editor } from 'monaco-editor';\r\n\r\n/**\r\n * Pulse Dark Theme for Monaco Editor\r\n *\r\n * Based on VS Code Dark+ theme with Pulse accent colors.\r\n */\r\nexport const pulseMonacoTheme: editor.IStandaloneThemeData = {\r\n  base: 'vs-dark',\r\n  inherit: true,\r\n  rules: [\r\n    // Comments\r\n    { token: 'comment', foreground: '6A9955', fontStyle: 'italic' },\r\n\r\n    // Keywords\r\n    { token: 'keyword', foreground: '569CD6' },\r\n    { token: 'keyword.control', foreground: 'C586C0' },\r\n\r\n    // Types\r\n    { token: 'type', foreground: '4EC9B0' },\r\n    { token: 'type.identifier', foreground: '4EC9B0' },\r\n\r\n    // Strings\r\n    { token: 'string', foreground: 'CE9178' },\r\n    { token: 'string.escape', foreground: 'D7BA7D' },\r\n\r\n    // Numbers\r\n    { token: 'number', foreground: 'B5CEA8' },\r\n\r\n    // Operators\r\n    { token: 'operator', foreground: 'D4D4D4' },\r\n\r\n    // Variables\r\n    { token: 'variable', foreground: '9CDCFE' },\r\n    { token: 'variable.predefined', foreground: '4FC1FF' },\r\n\r\n    // Functions\r\n    { token: 'function', foreground: 'DCDCAA' },\r\n\r\n    // Constants\r\n    { token: 'constant', foreground: '4FC1FF' },\r\n\r\n    // Tags (HTML/XML)\r\n    { token: 'tag', foreground: '569CD6' },\r\n    { token: 'attribute.name', foreground: '9CDCFE' },\r\n    { token: 'attribute.value', foreground: 'CE9178' },\r\n\r\n    // Structured Text specific\r\n    { token: 'keyword.st', foreground: '569CD6' },\r\n    { token: 'type.st', foreground: '4EC9B0' },\r\n    { token: 'function.st', foreground: 'DCDCAA' },\r\n  ],\r\n  colors: {\r\n    // Editor\r\n    'editor.background': '#1E1E1E',\r\n    'editor.foreground': '#D4D4D4',\r\n    'editor.lineHighlightBackground': '#282828',\r\n    'editor.selectionBackground': '#264F78',\r\n    'editor.inactiveSelectionBackground': '#3A3D41',\r\n\r\n    // Gutter\r\n    'editorLineNumber.foreground': '#858585',\r\n    'editorLineNumber.activeForeground': '#C6C6C6',\r\n    'editorGutter.background': '#1E1E1E',\r\n\r\n    // Cursor\r\n    'editorCursor.foreground': '#AEAFAD',\r\n\r\n    // Whitespace\r\n    'editorWhitespace.foreground': '#3B3B3B',\r\n\r\n    // Indent guides\r\n    'editorIndentGuide.background': '#404040',\r\n    'editorIndentGuide.activeBackground': '#707070',\r\n\r\n    // Minimap\r\n    'minimap.background': '#1E1E1E',\r\n\r\n    // Scrollbar\r\n    'scrollbarSlider.background': '#79797966',\r\n    'scrollbarSlider.hoverBackground': '#79797999',\r\n    'scrollbarSlider.activeBackground': '#BFBFBF66',\r\n\r\n    // Widget (autocomplete, hover)\r\n    'editorWidget.background': '#252526',\r\n    'editorWidget.border': '#454545',\r\n\r\n    // Diff editor\r\n    'diffEditor.insertedTextBackground': '#89D18533',\r\n    'diffEditor.removedTextBackground': '#F4877133',\r\n    'diffEditor.insertedLineBackground': '#89D18522',\r\n    'diffEditor.removedLineBackground': '#F4877122',\r\n  },\r\n};\r\n\r\n/**\r\n * Register Structured Text language with Monaco.\r\n *\r\n * Call this during app initialization.\r\n */\r\nexport function registerStructuredTextLanguage(monaco: typeof import('monaco-editor')): void {\r\n  // Register language\r\n  monaco.languages.register({\r\n    id: 'structured-text',\r\n    extensions: ['.st', '.ST'],\r\n    aliases: ['Structured Text', 'ST', 'IEC 61131-3'],\r\n  });\r\n\r\n  // Define token provider\r\n  monaco.languages.setMonarchTokensProvider('structured-text', {\r\n    defaultToken: '',\r\n    ignoreCase: true,\r\n\r\n    keywords: [\r\n      'PROGRAM', 'END_PROGRAM',\r\n      'FUNCTION', 'END_FUNCTION',\r\n      'FUNCTION_BLOCK', 'END_FUNCTION_BLOCK',\r\n      'VAR', 'VAR_INPUT', 'VAR_OUTPUT', 'VAR_IN_OUT', 'VAR_GLOBAL', 'VAR_EXTERNAL', 'END_VAR',\r\n      'CONSTANT', 'RETAIN', 'NON_RETAIN',\r\n      'IF', 'THEN', 'ELSIF', 'ELSE', 'END_IF',\r\n      'CASE', 'OF', 'END_CASE',\r\n      'FOR', 'TO', 'BY', 'DO', 'END_FOR',\r\n      'WHILE', 'END_WHILE',\r\n      'REPEAT', 'UNTIL', 'END_REPEAT',\r\n      'RETURN', 'EXIT', 'CONTINUE',\r\n      'AND', 'OR', 'XOR', 'NOT', 'MOD',\r\n      'TRUE', 'FALSE',\r\n    ],\r\n\r\n    typeKeywords: [\r\n      'BOOL', 'BYTE', 'WORD', 'DWORD', 'LWORD',\r\n      'SINT', 'INT', 'DINT', 'LINT',\r\n      'USINT', 'UINT', 'UDINT', 'ULINT',\r\n      'REAL', 'LREAL',\r\n      'TIME', 'DATE', 'TIME_OF_DAY', 'DATE_AND_TIME',\r\n      'STRING', 'WSTRING',\r\n      'ARRAY', 'STRUCT', 'END_STRUCT',\r\n    ],\r\n\r\n    operators: [\r\n      ':=', '=', '<>', '<', '>', '<=', '>=',\r\n      '+', '-', '*', '/', '**',\r\n      '&', '(', ')', '[', ']', ',', ';', ':',\r\n    ],\r\n\r\n    tokenizer: {\r\n      root: [\r\n        // Comments\r\n        [/\\(\\*/, 'comment', '@comment'],\r\n        [/\\/\\/.*$/, 'comment'],\r\n\r\n        // Strings\r\n        [/'[^']*'/, 'string'],\r\n        [/\"[^\"]*\"/, 'string'],\r\n\r\n        // Numbers\r\n        [/\\d+\\.\\d+/, 'number.float'],\r\n        [/\\d+/, 'number'],\r\n        [/16#[0-9A-Fa-f]+/, 'number.hex'],\r\n        [/2#[01]+/, 'number.binary'],\r\n\r\n        // Keywords\r\n        [\r\n          /[a-zA-Z_]\\w*/,\r\n          {\r\n            cases: {\r\n              '@keywords': 'keyword',\r\n              '@typeKeywords': 'type',\r\n              '@default': 'identifier',\r\n            },\r\n          },\r\n        ],\r\n\r\n        // Operators\r\n        [/:=/, 'operator'],\r\n        [/[<>=!]+/, 'operator'],\r\n        [/[+\\-*\\/]/, 'operator'],\r\n\r\n        // Delimiters\r\n        [/[;,.]/, 'delimiter'],\r\n        [/[()[\\]]/, '@brackets'],\r\n      ],\r\n\r\n      comment: [\r\n        [/[^(*]+/, 'comment'],\r\n        [/\\*\\)/, 'comment', '@pop'],\r\n        [/[(*]/, 'comment'],\r\n      ],\r\n    },\r\n  });\r\n\r\n  // Language configuration\r\n  monaco.languages.setLanguageConfiguration('structured-text', {\r\n    comments: {\r\n      lineComment: '//',\r\n      blockComment: ['(*', '*)'],\r\n    },\r\n    brackets: [\r\n      ['{', '}'],\r\n      ['[', ']'],\r\n      ['(', ')'],\r\n    ],\r\n    autoClosingPairs: [\r\n      { open: '{', close: '}' },\r\n      { open: '[', close: ']' },\r\n      { open: '(', close: ')' },\r\n      { open: \"'\", close: \"'\", notIn: ['string', 'comment'] },\r\n      { open: '\"', close: '\"', notIn: ['string'] },\r\n      { open: '(*', close: '*)' },\r\n    ],\r\n    surroundingPairs: [\r\n      { open: '{', close: '}' },\r\n      { open: '[', close: ']' },\r\n      { open: '(', close: ')' },\r\n      { open: \"'\", close: \"'\" },\r\n      { open: '\"', close: '\"' },\r\n    ],\r\n    folding: {\r\n      markers: {\r\n        start: /^\\s*(PROGRAM|FUNCTION|FUNCTION_BLOCK|IF|CASE|FOR|WHILE|REPEAT|VAR)/i,\r\n        end: /^\\s*(END_PROGRAM|END_FUNCTION|END_FUNCTION_BLOCK|END_IF|END_CASE|END_FOR|END_WHILE|END_REPEAT|END_VAR)/i,\r\n      },\r\n    },\r\n    indentationRules: {\r\n      increaseIndentPattern: /^\\s*(PROGRAM|FUNCTION|FUNCTION_BLOCK|IF|ELSE|ELSIF|CASE|FOR|WHILE|REPEAT|VAR)/i,\r\n      decreaseIndentPattern: /^\\s*(END_PROGRAM|END_FUNCTION|END_FUNCTION_BLOCK|END_IF|END_CASE|END_FOR|END_WHILE|END_REPEAT|END_VAR|ELSE|ELSIF)/i,\r\n    },\r\n  });\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\services\\settingsApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\services\\websocket.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\stores\\agentStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\stores\\approvalStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\stores\\editorStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\stores\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\stores\\uiStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\stores\\workspaceStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\styles\\theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\types\\editor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\types\\electron.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\src\\types\\websocket.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\katha\\OneDrive - The Pennsylvania State University\\Documents\\Projects\\Pulse\\pulse-electron\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
